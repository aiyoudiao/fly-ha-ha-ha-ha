{"version":3,"sources":["state/useStore.js","models/spaceship.gltf","textures/noise.png","textures/enginetextureflip.png","components/Ship.js","constants/index.js","textures/grid-rainbow.png","components/Ground.js","textures/grid-pink.png","textures/grid-red.png","textures/grid-orange.png","textures/grid-green.png","textures/grid-blue.png","textures/grid-purple.png","textures/galaxy.jpg","components/Skybox.js","util/randomInRange.js","util/distance2D.js","components/Cubes.js","components/Walls.js","util/generateFixedCubes.js","components/FixedCubes.js","components/Arch.js","textures/galaxyTextureBW.png","components/Hyperspace.js","components/CubeTunnel.js","components/Effects.js","components/KeyboardControls.js","components/GameState.js","components/GlobalColor.js","audio/intro-loop.mp3","audio/main-nodrums.mp3","audio/main-onlydrums.mp3","components/Music.js","audio/speedup.mp3","components/Sound.js","components/html/CustomLoader.js","components/html/Author.js","textures/cuberun-logo.png","components/html/Overlay.js","components/html/Hud.js","components/html/GameOverScreen.js","components/CubeWorld.js","index.js"],"names":["useStore","create","set","get","score","level","gameOver","gameStarted","musicEnabled","JSON","parse","localStorage","getItem","isSpeedingUp","controls","left","right","directionalLight","createRef","camera","ship","sun","sfx","hasInteracted","setHasInteracted","state","setIsSpeedingUp","speedingUp","incrementLevel","setScore","setGameStarted","started","setGameOver","over","enableMusic","enabled","mutation","gameSpeed","desiredSpeed","horizontalVelocity","colorLevel","shouldShiftItems","currentMusicLevel","currentLevelLength","globalColor","Color","v","Vector3","ShipModel","props","children","useGLTF","shipModel","nodes","materials","s","pointLight","useRef","innerConeExhaust","coneExhaust","outerConeExhaust","noise","useTexture","noiseTexture","exhaust","engineTexture","leftWingTrail","rightWingTrail","bodyDetail","clock","useThree","controlsRef","getState","useEffect","subscribe","current","useLayoutEffect","rotation","Math","PI","position","lookAt","x","y","z","material","visible","wrapS","wrapT","MirroredRepeatWrapping","repeat","anisotropy","useState","Vector2","innerLathe","mediumLathe","lathe","innerConeScaleFactor","useFrame","delta","accelDelta","time","getElapsedTime","slowSine","sin","medSine","fastSine","scale","abs","max","min","intensity","map","offset","scaleFactor","color","ref","decay","distance","PerspectiveCamera","makeDefault","fov","castShadow","receiveShadow","dispose","geometry","Ship_Body","attach","metalness","reflectivity","clearcoat","roughness","Ship_Body_1","Chassis","Ship_Body_2","Ship_Body_3","Ship_Body_4","args","transparent","opacity","emissive","emissiveIntensity","alphaMap","Loading","Ship","fallback","preload","PLANE_SIZE","LEFT_BOUND","CUBE_SIZE","WALL_RADIUS","COLORS","name","hex","three","THREE","Ground","ground","groundTwo","plane","planeTwo","textures","gridRainbow","forEach","texture","RepeatWrapping","moveCounter","lastMove","round","length","uuid","emissiveMap","LoadingGround","CompleteGround","Sun","sunColor","useMemo","fog","Sky","galaxyTexture","sky","stars","Stars","radius","depth","count","factor","saturation","fade","side","BackSide","Fog","near","far","Skybox","randomInRange","from","to","floor","random","distance2D","p1x","p1y","p2x","p2y","a","b","sqrt","negativeBound","InstancedCubes","mesh","dummy","Object3D","cubes","temp","i","RIGHT_BOUND","push","diamondStart","diamondEnd","isOutsideDiamond","cube","updateMatrix","setMatrixAt","matrix","instanceMatrix","needsUpdate","Walls","rightWall","leftWall","segments","makeWall","hasGap","gapSize","wallCoordinates","Array","index","splice","spliceFactor","makeTunnel","coords","generateDiamond","initialWall","tunnel","diamond","size","wallEndOffset","tunnelEndOffset","outerLeftWall","outerRightWall","innerSize","innerLeftWall","innerRightWall","middlePiece","firstDiamond","secondDiamond","coordinates","finalTunnel","makeDiamond","tunnelCoords","generateCubeTunnel","diamondCoords","currentLevelMinusDiamondStart","Arch","arches","arch1","arch2","arch3","arch4","arch5","arch6","arch7","arch8","arch9","arch10","levelColor","base","HyperspaceTunnel","tunnel2","tunnels","repeatX","repeatY","lathe2","lowerBound","upperBound","prevLowerBound","prevUpperBound","SuspendedHyperspaceTunnel","CubeTunnel","Effects","composer","scene","gl","bloomFactor","setSize","width","height","bloom","passes","strength","render","attachArray","undefined","FXAAShader","material-uniforms-resolution-value","extend","EffectComposer","ShaderPass","RenderPass","UnrealBloomPass","SSAOPass","AfterimagePass","pressed","useKeys","target","event","up","downHandler","e","indexOf","key","isRepeating","keyCode","upHandler","window","addEventListener","passive","removeEventListener","KeyboardControls","shipSelector","setScoreSelector","gameStartedSelector","setIsSpeedingUpSelector","setGameOverSelector","GameState","GlobalColor","materialRef","colorAlpha","previousLevel","rainbowAlpha1","rainbowAlpha2","rainbowAlpha3","rainbowAlpha4","rainbowAlpha5","rainbowSpeed","lerpColors","Music","introPlayer","themePlayer","drumPlayer","soundOrigin","AudioListener","listener","introTheme","useLoader","AudioLoader","introSong","mainTheme","mainSong","mainThemeDrums","mainSongDrums","themeFilter","audioAnalyzer","introVolume","themeVolume","drumVolume","introPlaying","startCrossfade","context","resume","setBuffer","createBiquadFilter","type","frequency","value","setFilter","AudioAnalyser","isPlaying","stop","play","setLoop","cam","add","remove","setPlaybackRate","audioLevel","MathUtils","inverseLerp","getFrequencyData","currentTime","toFixed","setVolume","SuspenseMusic","Sound","sound","speedUpSound","speedUp","SuspenseSound","defaultDataInterpolation","p","CustomLoader","active","progress","dataInterpolation","progressRef","React","rafRef","progressSpanRef","updateProgress","innerText","requestAnimationFrame","cancelAnimationFrame","style","styles","container","inner","bar","transform","marginTop","data","display","alignItems","justifyContent","transition","zIndex","textAlign","borderRadius","boxShadow","border","background","transformOrigin","fontVariantNumeric","fontSize","fontFamily","whiteSpace","textShadow","Author","className","rel","href","Overlay","shown","setShown","opaque","setOpaque","hasLoaded","setHasLoaded","useProgress","t","setTimeout","clearTimeout","setItem","stringify","onClick","src","cubeRunLogo","alt","getSpeed","getScore","Hud","showControls","setShowControls","setLeftPressed","setRightPressed","then","Date","now","speedRef","scoreRef","currentSpeed","currentScore","addEffect","oncontextmenu","preventDefault","stopPropagation","isMobile","onTouchStart","onTouchEnd","GameOverScreen","previousScores","fill","highScores","setHighscores","some","previousScore","sortedScores","sort","resortedScores","newScore","textDecoration","location","reload","CubeWorld","bgColor","antialias","alpha","mode","dpr","object","groundColor","Preload","all","ReactDOM","createRoot","document","getElementById","StrictMode"],"mappings":"2TAIMA,EAAWC,aAAO,SAACC,EAAKC,GAAS,IAAD,EAEpC,MAAO,CACLD,MACAC,MACAC,MAAO,EACPC,MAAO,EACPC,UAAU,EACVC,aAAa,EACbC,aAAY,UAAEC,KAAKC,MAAMC,aAAaC,QAAQ,wBAAlC,SACZC,cAAc,EACdC,SAAU,CACRC,MAAM,EACNC,OAAO,GAETC,iBAAkBC,sBAClBC,OAAQD,sBACRE,KAAMF,sBACNG,IAAKH,sBACLI,IAAKJ,sBACLK,eAAe,EACfC,iBAAkB,kBAAMtB,GAAI,SAAAuB,GAAK,MAAK,CAAEF,eAAe,OACvDG,gBAAiB,SAACC,GAAD,OAAgBzB,GAAI,SAAAuB,GAAK,MAAK,CAAEZ,aAAcc,OAC/DC,eAAgB,kBAAM1B,GAAI,SAAAuB,GAAK,MAAK,CAAEpB,MAAOoB,EAAMpB,MAAQ,OAC3DwB,SAAU,SAACzB,GAAD,OAAWF,GAAI,SAAAuB,GAAK,MAAK,CAAErB,MAAOA,OAC5C0B,eAAgB,SAACC,GAAD,OAAa7B,GAAI,SAAAuB,GAAK,MAAK,CAAElB,YAAawB,OAC1DC,YAAa,SAACC,GAAD,OAAU/B,GAAI,SAAAuB,GAAK,MAAK,CAAEnB,SAAU2B,OACjDC,YAAa,SAACC,GAAD,OAAajC,GAAI,SAAAuB,GAAK,MAAK,CAAEjB,aAAc2B,WAItDC,EAAW,CACf9B,UAAU,EACVF,MAAO,EACPiC,UAAW,EACXC,aAAc,EACdC,mBAAoB,EACpBC,WAAY,EACZC,kBAAkB,EAClBC,kBAAmB,EACnBC,mBAAoB,EACpBC,YAAa,IAAIC,S,uCC7CJ,MAA0B,uCCA1B,MAA0B,kCCA1B,MAA0B,8C,OCanCC,EAAI,IAAIC,UAEd,SAASC,EAAUC,EAAnB,GAAyC,IAAbC,EAAY,EAAZA,SAAY,EACTC,YAAQC,EAAW,2DAAxCC,EAD8B,EAC9BA,MAAOC,EADuB,EACvBA,UAETlC,EAAOpB,GAAS,SAACuD,GAAD,OAAOA,EAAEnC,QACzBD,EAASnB,GAAS,SAACuD,GAAD,OAAOA,EAAEpC,UAE3BqC,EAAaC,mBAEbC,EAAmBD,mBACnBE,EAAcF,mBACdG,EAAmBH,mBAEnBI,EAAQC,YAAWC,GACnBC,EAAUF,YAAWG,GAErBC,EAAgBT,mBAChBU,EAAiBV,mBAEjBW,EAAaX,mBAEXY,EAAUC,cAAVD,MAEF9D,EAAcP,GAAS,SAAAuD,GAAC,OAAIA,EAAEhD,eAC9BD,EAAWN,GAAS,SAAAuD,GAAC,OAAIA,EAAEjD,YAG3BiE,EAAcd,iBAAOzD,EAASwE,WAAW1D,UAC/C2D,qBAAU,kBAAMzE,EAAS0E,WACvB,SAAA5D,GAAQ,OAAKyD,EAAYI,QAAU7D,KACnC,SAAAW,GAAK,OAAIA,EAAMX,cACd,IAEH8D,2BAAgB,WACdzD,EAAOwD,QAAQE,SAAS3E,IAAI,EAAG4E,KAAKC,GAAI,GACxC5D,EAAOwD,QAAQK,SAAS9E,IAAI,EAAG,GAAI,GACnCiB,EAAOwD,QAAQM,OAAOnC,EAAE5C,IAAIkB,EAAKuD,QAAQK,SAASE,EAAG9D,EAAKuD,QAAQK,SAASG,EAAG/D,EAAKuD,QAAQK,SAASI,EAAI,KAExGjE,EAAOwD,QAAQE,SAASO,EAAIN,KAAKC,GACjC3D,EAAKuD,QAAQE,SAASM,EAAIL,KAAKC,KAC9B,CAAC3D,EAAMD,IAGVyD,2BAAgB,YACTrE,GAAeD,GAClBoD,EAAiBiB,QAAQU,SAASC,SAAU,EAC5C3B,EAAYgB,QAAQU,SAASC,SAAU,EACvC1B,EAAiBe,QAAQU,SAASC,SAAU,EAC5CpB,EAAcS,QAAQU,SAASC,SAAU,EACzCnB,EAAeQ,QAAQU,SAASC,SAAU,EAC1C9B,EAAWmB,QAAQW,SAAU,IAE7B5B,EAAiBiB,QAAQU,SAASC,SAAU,EAC5C3B,EAAYgB,QAAQU,SAASC,SAAU,EACvC1B,EAAiBe,QAAQU,SAASC,SAAU,EAC5CpB,EAAcS,QAAQU,SAASC,SAAU,EACzCnB,EAAeQ,QAAQU,SAASC,SAAU,EAC1C9B,EAAWmB,QAAQW,SAAU,KAE9B,CAAC/E,EAAaD,IAEjBsE,2BAAgB,WACdf,EAAM0B,MAAQ1B,EAAM2B,MAAQC,yBAC5B5B,EAAM6B,OAAOxF,IAAI,EAAG,GACpB2D,EAAM8B,WAAa,GAEnB3B,EAAQuB,MAAQvB,EAAQwB,MAAQC,yBAChCzB,EAAQ0B,OAAOxF,IAAI,EAAG,GACtB8D,EAAQ2B,WAAa,KACpB,CAAC9B,EAAOG,IApE2B,MAsEjB4B,oBAAS,WAQ5B,MAPe,CACb,IAAIC,UAAQ,GAAK,IACjB,IAAIA,UAAQ,GAAK,GACjB,IAAIA,UAAQ,GAAK,KACjB,IAAIA,UAAQ,GAAK,KACjB,IAAIA,UAAQ,IAAM,OANfC,EAtE+B,sBAiFhBF,oBAAS,WAM7B,MALe,CACb,IAAIC,UAAQ,GAAK,GACjB,IAAIA,UAAQ,GAAK,GACjB,IAAIA,UAAQ,IAAM,OAJfE,EAjF+B,sBA0FtBH,oBAAS,WAQvB,MAPe,CACb,IAAIC,UAAQ,IAAM,GAClB,IAAIA,UAAQ,GAAK,IACjB,IAAIA,UAAQ,GAAK,KACjB,IAAIA,UAAQ,GAAK,KACjB,IAAIA,UAAQ,IAAM,OANfG,EA1F+B,oBAqGhCC,EAAuBxC,iBAAO,IAgIpC,OA9HAyC,aAAS,SAACzE,EAAO0E,GACf,IAAMC,EAAa,EAAID,EAAQ,EAEzBE,EAAOhC,EAAMiC,iBAEbC,EAAWzB,KAAK0B,IAAW,EAAPH,GACpBI,EAAU3B,KAAK0B,IAAW,GAAPH,GACnBK,EAAW5B,KAAK0B,IAAW,GAAPH,GAPD,EASD9B,EAAYI,QAA5B5D,EATiB,EASjBA,KAAMC,EATW,EASXA,MAEdmD,EAAeQ,QAAQgC,MAAMzB,EAAIwB,EAAW,GAC5CvC,EAAeQ,QAAQgC,MAAMxB,EAAIsB,EAAU,GAC3CvC,EAAcS,QAAQgC,MAAMzB,EAAIwB,EAAW,GAC3CxC,EAAcS,QAAQgC,MAAMxB,EAAIsB,EAAU,GAG1CrF,EAAKuD,QAAQK,SAASI,GAAKhD,EAASC,UAAY8D,EAAQ,IAIpD/D,EAAS9B,WACX8B,EAASG,mBAAqB,GAEhCnB,EAAKuD,QAAQK,SAASE,GAAK9C,EAASG,mBAAqB4D,EAAQ,IAGjE/E,EAAKuD,QAAQE,SAASO,EAAkC,IAA9BhD,EAASG,mBACnCnB,EAAKuD,QAAQE,SAASM,EAAIL,KAAKC,GAAmC,GAA9B3C,EAASG,mBAC7CnB,EAAKuD,QAAQE,SAASK,GAAKJ,KAAK8B,IAAIxE,EAASG,oBAAsB,GAGnEnB,EAAKuD,QAAQK,SAASG,GAAKoB,EAAW,IACtCnF,EAAKuD,QAAQE,SAASK,GAAKqB,EAAW,IACtCnF,EAAKuD,QAAQE,SAASO,GAAKN,KAAK0B,IAAW,EAAPH,GAAY,IAGhD7C,EAAWmB,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,EAAI,EAC1D5B,EAAWmB,QAAQK,SAASE,EAAI9D,EAAKuD,QAAQK,SAASE,EACtD1B,EAAWmB,QAAQK,SAASG,GAAKoB,EAAW,GAG5CpF,EAAOwD,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,EAAI,KACtDjE,EAAOwD,QAAQK,SAASG,EAAI/D,EAAKuD,QAAQK,SAASG,EAAI,EACtDhE,EAAOwD,QAAQK,SAASE,EAAI9D,EAAKuD,QAAQK,SAASE,EAElD/D,EAAOwD,QAAQE,SAASM,EAAIL,KAAKC,IAE5BhE,GAAQC,IAAYD,IAASC,KAC5BoB,EAASG,mBAAqB,IAC5BH,EAASG,mBAAqB6D,EAAa,EAC7ChE,EAASG,mBAAqB,EAE9BH,EAASG,oBAAsB6D,GAI/BhE,EAASG,mBAAqB,IAC5BH,EAASG,mBAAqB6D,EAAa,EAC7ChE,EAASG,mBAAqB,EAE9BH,EAASG,oBAAsB6D,KAKhChE,EAAS9B,UAAY8B,EAASC,UAAY,IACxCtB,IAASC,IACZoB,EAASG,mBAAqBuC,KAAK+B,KAAK,GAAgBzE,EAASG,mBAAqB6D,GAGtFjC,EAAeQ,QAAQgC,MAAMzB,EAAIwB,EAAW,GAC5CvC,EAAeQ,QAAQgC,MAAMxB,EAAIoB,EAAW,GAC5CrC,EAAcS,QAAQgC,MAAMzB,EAAIwB,EAAW,IAC3CxC,EAAcS,QAAQgC,MAAMxB,EAAIoB,EAAW,MAGvCxF,GAAQC,IACZoB,EAASG,mBAAqBuC,KAAKgC,IAAI,GAAe1E,EAASG,mBAAqB6D,GAGpFlC,EAAcS,QAAQgC,MAAMzB,EAAIwB,EAAW,GAC3CxC,EAAcS,QAAQgC,MAAMxB,EAAIoB,EAAW,GAC3CpC,EAAeQ,QAAQgC,MAAMzB,EAAIwB,EAAW,IAC5CvC,EAAeQ,QAAQgC,MAAMxB,EAAIoB,EAAW,MAIhD/C,EAAWmB,QAAQoC,UAAY,GAAML,EAAW,GAEhD9C,EAAiBe,QAAQU,SAAS2B,IAAIC,OAAO9B,GAAK,KAAQ,GAAM/C,EAASC,WAAa8D,EAAQ,IAC9FxC,EAAYgB,QAAQU,SAAS2B,IAAIC,OAAO9B,GAAK,KAAQ,GAAM/C,EAASC,WAAa8D,EAAQ,IAErF/D,EAASE,aAAeF,EAASC,WACnCmB,EAAWmB,QAAQoC,UAAY,GAAML,EAAW,GAE5CT,EAAqBtB,QAAU,MAC7BsB,EAAqBtB,QAAU,KAAQwB,EAAQ,IAAM,IACvDF,EAAqBtB,QAAU,IAE/BsB,EAAqBtB,SAAW,KAAQwB,EAAQ,MAIhDF,EAAqBtB,QAAU,KAC7BsB,EAAqBtB,QAAU,KAAQwB,EAAQ,IAAM,GACvDF,EAAqBtB,QAAU,GAE/BsB,EAAqBtB,SAAW,KAAQwB,EAAQ,KAMtD,IAAMe,EAAc9E,EAASM,kBAAoB,GAAMN,EAASM,kBAAoB,GAAM,EAE1FgB,EAAiBiB,QAAQgC,MAAMvB,EAAKsB,EAAW,GAC/ChD,EAAiBiB,QAAQgC,MAAMzB,GAAKe,EAAqBtB,QAAU+B,EAAW,IAAMQ,EACpFvD,EAAYgB,QAAQgC,MAAMvB,EAAKsB,EAAW,GAC1C/C,EAAYgB,QAAQgC,MAAMzB,GAAK,IAAOwB,EAAW,IAAMQ,EACvDtD,EAAiBe,QAAQgC,MAAMvB,EAAK,GAAMsB,EAAW,GACrD9C,EAAiBe,QAAQgC,MAAMzB,GAAK,GAAMwB,EAAW,IAAMQ,EAE3D9C,EAAWO,QAAQU,SAAS8B,MAAQ/E,EAASQ,eAI7C,qCACE,4BAAYwE,IAAK5D,EAAY2D,MAAM,SAASE,MAAO,GAAIC,SAAU,GAAIP,UAAW,EAAG/B,SAAU,CAAC,EAAG,GAAI,KACrG,cAACuC,EAAA,EAAD,CAAmBC,aAAW,EAACJ,IAAKjG,EAAQsG,IAAK,GAAI5C,SAAU,CAAC,EAAGC,KAAKC,GAAI,GAAIC,SAAU,CAAC,EAAG,IAAK,MACnG,gDAAO0C,YAAU,EAACC,eAAa,EAACP,IAAKhG,EAAM4D,SAAU,CAAC,EAAG,GAAI,KAAS/B,GAAtE,IAA6E2E,QAAS,KAAtF,UACG1E,EACD,sBAAM2E,SAAUxE,EAAMyE,UAAUD,SAAhC,SACE,sCAAsBE,OAAO,WAAWZ,MAAM,YAAYa,UAAW,GAAKC,aAAc,EAAGC,UAAW,EAAGC,UAAW,MAEtH,sBAAMR,eAAa,EAACD,YAAU,EAACG,SAAUxE,EAAM+E,YAAYP,SAAUxC,SAAU/B,EAAU+E,UACzF,sBAAMR,SAAUxE,EAAMiF,YAAYT,SAAlC,SACE,mCAAmBE,OAAO,WAAWZ,MAAM,aAE7C,sBAAMQ,eAAa,EAACD,YAAU,EAACG,SAAUxE,EAAMkF,YAAYV,SAAUxC,SAAU/B,EAAU,gBACzF,sBAAM8D,IAAKhD,EAAYyD,SAAUxE,EAAMmF,YAAYX,SAAnD,SACE,qCAAqBE,OAAO,WAAWZ,MAAM,YAE/C,uBAAMC,IAAKlD,EAAeyC,MAAO,CAAC,GAAK,IAAM,GAAI3B,SAAU,CAAC,IAAK,IAAM,GAAvE,UACE,4CAA4ByD,KAAM,CAAC,IAAK,KACxC,mCAAmBC,aAAW,EAACC,QAAS,GAAKxB,MAAM,aAErD,uBAAMC,IAAKjD,EAAgBwC,MAAO,CAAC,GAAK,IAAM,GAAI3B,SAAU,EAAE,IAAK,IAAM,GAAzE,UACE,4CAA4ByD,KAAM,CAAC,IAAK,KACxC,mCAAmBC,aAAW,EAACC,QAAS,GAAKxB,MAAM,aAErD,uBAAM7B,SAAS,EAAM8B,IAAK1D,EAAkBsB,SAAU,CAAC,GAAI,GAAK,IAAMH,SAAU,CAACC,KAAKC,GAAK,EAAG,EAAGD,KAAKC,IAAtG,UACE,qCAAqB0D,KAAM,CAAC3C,EAAY,MACxC,qCAAqB4C,aAAW,EAACC,QAAS,EAAGxB,MAAM,aAErD,uBAAM7B,SAAS,EAAM8B,IAAKzD,EAAaqB,SAAU,CAAC,GAAI,GAAK,KAAOH,SAAU,CAACC,KAAKC,GAAK,EAAG,EAAGD,KAAKC,IAAlG,UACE,qCAAqB0D,KAAM,CAAC1C,EAAa,MACzC,qCAAqB2C,aAAW,EAACC,QAAS,GAAK3B,IAAKnD,EAAOsD,MAAO,SAAUyB,SAAS,MAAMC,kBAAmB,OAEhH,uBAAMvD,SAAS,EAAM8B,IAAKxD,EAAkBoB,SAAU,CAAC,GAAI,GAAK,GAAIH,SAAU,CAACC,KAAKC,GAAK,EAAG,EAAGD,KAAKC,IAApG,UACE,qCAAqB0D,KAAM,CAACzC,EAAO,MACnC,qCAAqB0C,aAAW,EAACI,SAAU9E,EAASgD,IAAKhD,EAASmD,MAAM,sBAUlF,SAAS4B,IACP,OACE,uBAAMzD,SAAO,EAACN,SAAU,CAAC,EAAG,IAAM,GAAIH,SAAU,CAAC,EAAG,EAAG,GAAvD,UACE,gCAAgBkD,OAAO,WAAWU,KAAM,CAAC,EAAG,GAAI,MAChD,sCACEV,OAAO,WACPZ,MAAM,QACNuB,aAAW,EACXC,QAAS,EACTR,UAAW,EACXH,UAAW,OAOJ,SAASgB,EAAT,GAA6B,IAAb9F,EAAY,EAAZA,SAE7B,OACE,cAAC,WAAD,CAAU+F,SAAU,cAACF,EAAD,IAApB,SACE,cAAC/F,EAAD,UACGE,MAxBTC,IAAQ+F,QAAQ9F,EAAW,2DC1RpB,IAAM+F,EAAa,IAObC,GAAc,IAGdC,EAAY,GAQZC,EAAc,GAEdC,EAAS,CACpB,CACEC,KAAM,OACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,WAEzB,CACEH,KAAM,MACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,WAEzB,CACEH,KAAM,SACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,WAEzB,CACEH,KAAM,QACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,UAEzB,CACEH,KAAM,OACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,UAEzB,CACEH,KAAM,SACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,UAEzB,CACEH,KAAM,QACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,UAEzB,CACEH,KAAM,QACNC,IAAK,UACLC,MAAO,IAAIC,QAAY,YChEZ,MAA0B,yCCmBnCxC,EAAQ,IAAItE,QAAM,GAExB,SAAS+G,IACP,IAAMC,EAASpG,mBACTqG,EAAYrG,mBAEZsG,EAAQtG,mBACRuG,EAAWvG,mBAEXwG,EAAWnG,YAAW,CC5Bf,i7FCAA,i7FCAA,69FCAA,q7FCAA,q7FCAA,y9FN4BgFoG,IAEvF9I,EAAOpB,GAAS,SAAAuD,GAAC,OAAIA,EAAEnC,QACvBQ,EAAiB5B,GAAS,SAAAuD,GAAC,OAAIA,EAAE3B,kBAEvCgD,2BAAgB,WACdqF,EAASE,SAAQ,SAAAC,GACfA,EAAQ7E,MAAQ6E,EAAQ5E,MAAQ6E,iBAChCD,EAAQ1E,OAAOxF,IApBAiJ,OAqBfiB,EAAQzE,WAAa,QAEtB,CAACsE,IAEJ,IAAMK,EAAc7G,iBAAO,GACrB8G,EAAW9G,iBAAO,GA8DxB,OA5DAyC,aAAS,SAACzE,EAAO0E,GAEX/E,EAAKuD,SAGHG,KAAK0F,MAAMpJ,EAAKuD,QAAQK,SAASI,GAAK+D,EAAamB,EAAY3F,QAAU,IAAM,MAGrD,IAAxB2F,EAAY3F,SAAiBG,KAAK8B,IAAIxF,EAAKuD,QAAQK,SAASI,GAAKN,KAAK8B,IAAI2D,EAAS5F,UAAY,MAG7F2F,EAAY3F,QAAU,IAAM,IAC9B/C,IACAQ,EAASI,aACTJ,EAASE,cFrCgB,GEuCrBF,EAASI,YAAcyH,EAASQ,SAClCrI,EAASI,WAAa,IAItB8H,EAAY3F,QAAU,IAAM,GAC9BmF,EAAUnF,QAAQK,SAASI,GAjDjB+D,IAkDVoB,EAAS5F,QAAUmF,EAAUnF,QAAQK,SAASI,EAC9C4E,EAASrF,QAAQU,SAAS2B,IAAMiD,EAAS7H,EAASI,cAElDqH,EAAOlF,QAAQK,SAASI,GArDd+D,IAsDVoB,EAAS5F,QAAUkF,EAAOlF,QAAQK,SAASI,EAC3C2E,EAAMpF,QAAQU,SAAS2B,IAAMiD,EAAS7H,EAASI,cAInD8H,EAAY3F,WAMZvC,EAASI,WAAa,GACpBuH,EAAMpF,QAAQU,SAAS2B,IAAI0D,OAASV,EAASrF,QAAQU,SAAS2B,IAAI0D,OAChEX,EAAMpF,QAAQU,SAASwD,kBAAoB,EACzCkB,EAAMpF,QAAQU,SAASwD,kBAAoB1C,EAAQ/D,EAASC,UAAY,EAC1E0H,EAAMpF,QAAQU,SAASwD,kBAAoB,EAE3CkB,EAAMpF,QAAQU,SAASwD,mBAAqB1C,EAAQ/D,EAASC,WAG/D0H,EAAMpF,QAAQU,SAAS2B,IAAMiD,EAAS7H,EAASI,YAC3CJ,EAASI,aAAeyH,EAASQ,OAAS,EAC5CV,EAAMpF,QAAQU,SAASsF,YAAcV,EAAS,GAE9CF,EAAMpF,QAAQU,SAASsF,YAAcV,EAAS7H,EAASI,WAAa,GAEtEuH,EAAMpF,QAAQU,SAASwD,kBAAoB,OAQjD,qCACE,uBAAOzB,IAAKyC,EAAQ7E,SAAU,CAAC,EAAG,GAAI,KAAtC,SACE,uBACEoC,IAAK2C,EACLpC,eAAa,EACbrC,SAAO,EACPT,SAAU,EAAEC,KAAKC,GAAK,EAAG,EAAG,GAJ9B,UAME,qCAAqBgD,OAAO,WAAWU,KAAM,CAACU,EAAYA,EAAY,EAAG,KACzE,sCACExB,eAAa,EACbR,MAAOA,EAAMjH,IAAI,UACjByK,YAAaV,EAAS,GACtBrB,SAAUzB,EAAMjH,IAAI,UACpB2I,kBAAmB,EACnBd,OAAO,WACPf,IAAKiD,EAAS,GACd9B,UAAW,EACXH,UAAW,SAIjB,uBAAOZ,IAAK0C,EAAW9E,SAAU,CAAC,EAAG,GAAG,MAAxC,SACE,uBACEoC,IAAK4C,EACLrC,eAAa,EACbrC,SAAO,EACPT,SAAU,EAAEC,KAAKC,GAAK,EAAG,EAAG,GAJ9B,UAME,qCAAqBgD,OAAO,WAAWU,KAAM,CAACU,EAAYA,EAAY,EAAG,KACzE,sCACExB,eAAa,EACbgD,YAAaV,EAAS,GACtBlC,OAAO,WACPf,IAAKiD,EAAS,GACd9B,UAAW,EACXH,UAAW,YAQvB,SAAS4C,IACP,OACE,uBACEjD,eAAa,EACbrC,SAAO,EACPN,SAAU,CAAC,EAAG,EAAG,GACjBH,SAAU,EAAEC,KAAKC,GAAK,EAAG,EAAG,GAJ9B,UAME,qCAAqBgD,OAAO,WAAWU,KAAM,CAAC,IAAM,IAAM,EAAG,KAC7D,sCACEd,eAAa,EACbI,OAAO,WACPZ,MAAK,QACLgB,UAAW,EACXH,UAAW,OAMJ,SAAS6C,IAEtB,OACE,cAAC,WAAD,CAAU5B,SAAU,cAAC2B,EAAD,IAApB,SACE,cAAChB,EAAD,M,YO7KS,MAA0B,mCCWzC,SAASkB,IAAO,IACNzG,EAAUC,cAAVD,MAEFhD,EAAMrB,GAAS,SAACuD,GAAD,OAAOA,EAAElC,OACxBD,EAAOpB,GAAS,SAACuD,GAAD,OAAOA,EAAEnC,QAEzB2J,EAAWC,mBAAQ,kBAAM,IAAInI,QAAM,EAAG,KAAO,QAAQ,IAsB3D,OApBAqD,aAAS,SAACzE,EAAO0E,GACX/E,EAAKuD,UACPtD,EAAIsD,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,EAAI,IACnD/D,EAAIsD,QAAQK,SAASE,EAAI9D,EAAKuD,QAAQK,SAASE,GAGjD,IAAMgC,EAAc9E,EAASM,kBAE7BrB,EAAIsD,QAAQgC,MAAMzB,GAAKJ,KAAK0B,IAA6B,EAAzBnC,EAAMiC,kBAAwB,IAC9DjF,EAAIsD,QAAQgC,MAAMxB,GAAKL,KAAK0B,IAA6B,EAAzBnC,EAAMiC,kBAAwB,IAE1DY,GAAe,IAAO7F,EAAIsD,QAAQgC,MAAMzB,EAAI,MAC9C7D,EAAIsD,QAAQgC,MAAMzB,GAAKgC,EAAcf,EAAQ,EAC7C9E,EAAIsD,QAAQgC,MAAMxB,GAAK+B,EAAcf,EAAQ,GACpC9E,EAAIsD,QAAQgC,MAAMzB,EAAI,IAC/B7D,EAAIsD,QAAQgC,MAAMzB,GAAKgC,EAAcf,EAAQ,GAC7C9E,EAAIsD,QAAQgC,MAAMxB,GAAK+B,EAAcf,EAAQ,OAK/C,uBAAMiB,IAAK/F,EAAK2D,SAAU,CAAC,EAAG,GAAI,KAAlC,UACE,gCAAgB+C,OAAO,WAAWU,KAAM,CAAC,IAAK,GAAI,MAClD,sCAAsBwC,KAAK,EAAOrC,SAAUmC,EAAUlC,kBAAmB,EAAGd,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAKrH,SAASwB,IACP,IAAMd,EAAUtG,YAAWqH,GACrBC,EAAM3H,mBACN4H,EAAQ5H,mBAERrC,EAAOpB,GAAS,SAACuD,GAAD,OAAOA,EAAEnC,QAuB/B,OArBAwD,2BAAgB,WACdwF,EAAQ7E,MAAQ6E,EAAQ5E,MAAQC,yBAChC2E,EAAQ1E,OAAOxF,IAAI,IAAK,KACxBkK,EAAQzE,WAAa,KACpB,CAACyE,IAGJlE,aAAS,SAACzE,EAAO0E,GACfiF,EAAIzG,QAAQE,SAASO,GAAa,IAARe,EAAe/D,EAASC,UAClDgJ,EAAM1G,QAAQE,SAASO,GAAa,IAARe,EAAe/D,EAASC,UACpD+I,EAAIzG,QAAQiE,SAAWxG,EAASQ,YAE5BxB,EAAKuD,UACPyG,EAAIzG,QAAQK,SAASE,EAAI9D,EAAKuD,QAAQK,SAASE,EAC/CmG,EAAM1G,QAAQK,SAASE,EAAI9D,EAAKuD,QAAQK,SAASE,EACjDkG,EAAIzG,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,EAC/CiG,EAAM1G,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,MAMnD,qCACE,cAACkG,EAAA,EAAD,CAAOlE,IAAKiE,EAAOE,OAAQ,IAAKC,MAAO,IAAKC,MAAO,IAAOC,OAAQ,GAAIC,WAAY,EAAGC,MAAI,IACzF,uBAAMxE,IAAKgE,EAAKpG,SAAU,CAAC,EAAG,IAAK,IAAKH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAA9D,UACE,iCAAiBgC,UAAW,KAC5B,gCAAgBgB,OAAO,WAAWU,KAAM,CAAC,IAAM,GAAI,MACnD,mCAAmBG,SAAUW,EAAO,GAAGG,MAAOb,kBAAmB,GAAKoC,KAAK,EAAOY,KAAMC,WAAU/D,OAAO,WAAWf,IAAKoD,UAMjI,SAAS2B,IACP,IAAMd,EAAMxH,mBAQZ,OANAyC,aAAS,SAACzE,EAAO0E,GACf8E,EAAItG,QAAQqH,KAAO,IACnBf,EAAItG,QAAQsH,IAAM,IAClBhB,EAAItG,QAAQwC,MAAQ/E,EAASQ,eAI7B,qBAAKwE,IAAK6D,EAAKlD,OAAO,MAAMU,KAAM,CAAC,UAAW,IAAK,OAKxC,SAASyD,IAEtB,OACE,eAAC,WAAD,CAAUjD,SAAU,KAApB,UACE,cAAC6B,EAAD,IACA,cAACI,EAAD,IACA,cAACa,EAAD,OC5GN,IAEeI,EAFO,SAACC,EAAMC,GAAP,OAAcvH,KAAKwH,MAAMxH,KAAKyH,UAAYF,EAAKD,EAAO,IAAMC,GCAnE,SAASG,EAAWC,EAAKC,EAAKC,EAAKC,GAChD,IAAMC,EAAIF,EAAMF,EACVK,EAAIF,EAAMF,EAEhB,OAAO5H,KAAKiI,KAAKF,EAAIA,EAAIC,EAAIA,GCM/B,IAAME,GAAgB5D,IAGP,SAAS6D,IACtB,IAAMC,EAAOzJ,mBACP4B,EAAW5B,mBAEXrC,EAAOpB,GAAS,SAAAuD,GAAC,OAAIA,EAAEnC,QACvBf,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SAExB8M,EAAQnC,mBAAQ,kBAAM,IAAIoC,aAAY,IACtCC,EAAQrC,mBAAQ,WAGpB,IADA,IAAMsC,EAAO,GACJC,EAAI,EAAGA,EbPO,GaOUA,IAAK,CACpC,IAAMrI,EAAIiH,EAAca,EAdRQ,KAgBVpI,GAAK,IAAM+G,GAAe,IAAK,KAErCmB,EAAKG,KAAK,CAAEvI,IAAGC,EAHL,GAGQC,MAEpB,OAAOkI,IACN,IAEGI,EAAe1C,mBAAQ,kBAAQ3K,EAAQ8I,EbxBrB,EawBgDA,OAAiC,CAAC9I,IACpGsN,EAAa3C,mBAAQ,kBAAQ3K,EAAQ8I,EbzBnB,EayB8CA,MAA2B,CAAC9I,IA6DlG,OA3DA6F,aAAS,SAACzE,EAAO0E,GACf,IAAIyH,GAAmB,EACnBxM,EAAKuD,UACHvD,EAAKuD,QAAQK,SAASI,EAAIsI,GAAgBtM,EAAKuD,QAAQK,SAASI,EAAIuI,KACtEC,GAAmB,GAIvBP,EAAMlD,SAAQ,SAAC0D,EAAMN,GACnB,GAAInM,EAAKuD,QAAS,CAChB,GAAIkJ,EAAKzI,EAAIhE,EAAKuD,QAAQK,SAASI,GAAK,GACtC,GAAIyI,EAAK3I,EAAI9D,EAAKuD,QAAQK,SAASE,GAAK,IAAM2I,EAAK3I,EAAI9D,EAAKuD,QAAQK,SAASE,EAAI,GACxDsH,EAAWpL,EAAKuD,QAAQK,SAASE,EAAG9D,EAAKuD,QAAQK,SAASI,EAAGyI,EAAK3I,EAAG2I,EAAKzI,GAE5E,KACnBhD,EAASC,UAAY,EACrBD,EAAS9B,UAAW,GAKtBuN,EAAKzI,EAAIhE,EAAKuD,QAAQK,SAASI,EAAI,KACjCwI,GACFC,EAAKzI,EAAIhE,EAAKuD,QAAQK,SAASI,EAAI+D,EAAagD,GAAe,IAAK,GACpE0B,EAAK1I,GAAI,GACT0I,EAAK3I,EAAIiH,EAAca,EAnDbQ,OAqDVK,EAAKzI,EAAIhE,EAAKuD,QAAQK,SAASI,EAAK+D,KAAoBgD,GAAe,IAAK,GAC5E0B,EAAK1I,GAAI,GACT0I,EAAK3I,EAAIiH,EAAca,EAvDbQ,OA2DVK,EAAK1I,EAAIkE,KACPwE,EAAK1I,EAAY,IAARgB,EAAckD,GACzBwE,EAAK1I,EAAIkE,GAETwE,EAAK1I,GAAa,IAARgB,GAKhBd,EAASV,QAAQwC,MAAQ/E,EAASQ,YAElCuK,EAAMnI,SAAS9E,IACb2N,EAAK3I,EACL2I,EAAK1I,EACL0I,EAAKzI,GAIP+H,EAAMW,eACNZ,EAAKvI,QAAQoJ,YAAYR,EAAGJ,EAAMa,WAIpCd,EAAKvI,QAAQsJ,eAAeC,aAAc,KAI1C,gCAAe9G,IAAK8F,EAAMzE,KAAM,CAAC,KAAM,KbhFhB,IagFvB,UACE,mCAAmBA,KAAM,CAACY,EAAWA,EAAWA,KAChD,mCAAmBjC,IAAK/B,EAAU8B,MAAOoC,EAAO,GAAGG,W,YC5F1C,SAASyE,IACtB,IAAM/M,EAAOpB,GAAS,SAACuD,GAAD,OAAOA,EAAEnC,QAEzBgN,EAAY3K,mBACZ4K,EAAW5K,mBAiBjB,OAfAyC,aAAS,SAACzE,EAAO0E,GACX/E,EAAKuD,UACPyJ,EAAUzJ,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,EACrDiJ,EAAS1J,QAAQK,SAASI,EAAIhE,EAAKuD,QAAQK,SAASI,GAEhDhE,EAAKuD,QAAQK,SAASE,IAAKkE,KAAkChI,EAAKuD,QAAQK,SAASE,GAAKsI,OAC1FpL,EAASC,UAAY,EACrBD,EAAS9B,UAAW,IAIxB+N,EAAS1J,QAAQU,SAAS8B,MAAQ/E,EAASQ,YAC3CwL,EAAUzJ,QAAQU,SAAS8B,MAAQ/E,EAASQ,eAI5C,qCACE,cAAC,IAAD,CAAM6F,KAAM,CAACa,EAAaH,IAAgB,GAAInE,SAAU,CAACoE,EAAY,GAAI,GAAIvE,SAAU,CAACC,KAAKC,GAAK,EAAG,EAAGD,KAAKC,IAAKqC,IAAKiH,EAAvH,SACE,mCAAmBtG,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,UAExD,cAAC,IAAD,CAAMjB,KAAM,CAACa,EAAaH,IAAgB,GAAInE,SAAU,CdpBlCmE,IcoBgD,GAAI,GAAItE,SAAU,CAACC,KAAKC,GAAK,EAAG,EAAGD,KAAKC,IAAKqC,IAAKgH,EAAxH,SACE,mCAAmBrG,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,a,YChCxD4E,EAAW,GAGV,SAASC,IAAsC,IAA7BC,IAA4B,yDAAbC,EAAa,uDAAH,EAC1CC,EAAkB,YAAIC,MAAML,IAAWtH,KAAI,SAAC6G,EAAMe,GACtD,MAAO,CACL1J,EAAmB0J,EAAQvF,EALX,IAMhBlE,EAAGkE,GACHjE,EAAGwJ,GAASN,MAAiBM,EAAQvF,EAAuCuF,EAAQvF,EAAjC,QAInDmF,GACFE,EAAgBG,OAAOP,KAAexJ,KAAKwH,MAAMmC,EAAU,GAAIA,GAI/D,IAAMK,EAAe,EAKvB,OAJEJ,EAAgBG,OAAO,EAAGC,GAC1BJ,EAAgBG,QAAQC,EAAcA,GAGjCJ,EAGT,SAASK,IAA4C,IAU7CC,EAAS,CACb,CAAE9J,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,KACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,KACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MAEvB,OAAO4J,EA4EF,SAASC,IACd,IAAMC,EAAcX,IACdY,EAASJ,IACTK,EA5ER,WAAoD,IAA/BC,EAA8B,uDAAvB,GACpBC,GAAiB,IACjBC,GAF2C,uDAAJ,IAENlG,EAAY,GAE7CmG,EAAgB,YAAIb,MAAMU,IAAOrI,KAAI,SAAC6G,EAAMe,GAChD,MAAO,CACL1J,EAAa,IAAV0J,GAAe,GAAKA,GAASS,EAAO,GAAI,GAAiBT,EAAQvF,GAAa,GAAiBgG,EAAOhG,EAAauF,EAAQvF,EAC9HlE,EAAGkE,GACHjE,EAAGkK,EAAgBC,EAAkBX,EAAQvF,EAAY,SAIvDoG,EAAiB,YAAId,MAAMU,IAAOrI,KAAI,SAAC6G,EAAMe,GACjD,MAAO,CACL1J,EAAa,IAAV0J,EAAc,GAAKA,GAASS,EAAO,EAAIhG,GAAgBuF,EAAQvF,EAAaA,GAAgBgG,EAAOhG,EAAauF,EAAQvF,EAC3HlE,EAAGkE,GACHjE,EAAGkK,EAAgBC,EAAkBX,EAAQvF,EAAY,SAIvDqG,EAAY5K,KAAKwH,MAAM+C,EAAO,GAAK,EAEnCM,EAAgB,YAAIhB,MAAMe,IAAY1I,KAAI,SAAC6G,EAAMe,GACrD,MAAO,CACL1J,EAAa,IAAV0J,GAAe,GAAkBA,EAAQvF,EAAY,IAAMuF,EAAQc,EAAY,GAAK,GAAkBd,EAAQvF,GAAa,GAAmBqG,EAAYrG,EAAauF,EAAQvF,EAClLlE,EAAGkE,GACHjE,EAAGkK,EAAgBC,EAAmBzK,KAAKwH,MAAM+C,EAAO,KAAOhG,EAAauF,EAAQvF,EAAY,SAI9FuG,EAAiB,YAAIjB,MAAMe,IAAY1I,KAAI,SAAC6G,EAAMe,GACtD,MAAO,CACL1J,EAAa,IAAV0J,EAAevF,GAAiBuF,EAAQvF,EAAY,IAAMuF,EAAQc,EAAY,EAAKrG,GAAiBuF,EAAQvF,EAAaA,GAAkBqG,EAAYrG,EAAauF,EAAQvF,EAC/KlE,EAAGkE,GACHjE,EAAGkK,EAAgBC,EAAmBzK,KAAKwH,MAAM+C,EAAO,KAAOhG,EAAauF,EAAQvF,EAAY,SAI9FwG,EAAc,CAAE3K,EAAG,EAAGC,EAAGkE,GAAejE,EAAGkK,EAAgBC,EAAmBzK,KAAKwH,MAAM+C,EAAO,KAAOhG,EAAaA,GAEpHyG,EAAY,sBAAON,GAAP,YAAyBC,GAAzB,CAAyCI,GAAzC,YAAyDF,GAAzD,YAA2EC,IACvFG,EAAgBD,EAAa9I,KAAI,SAACgJ,EAAapB,GAAd,mBAAC,eAA6BoB,GAA9B,IAA2C5K,EAAGwJ,GAAS,GAAKoB,EAAY5K,EAAI,IAAgB4K,EAAY5K,EAAKiK,EAAOhG,EAAY,UAEjK4G,EAAc,CAClB,CAAE/K,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,MACrB,CAAEF,EAAG,GAAIC,EAAG,GAAIC,GAAI,MACpB,CAAEF,GAAI,GAAIC,EAAG,GAAIC,GAAI,OAGvB,MAAM,GAAN,mBAAW0K,GAAX,YAA4BC,GAAkBE,GAM9BC,GAEhB,MAAM,GAAN,mBAAWhB,GAAX,YAA2BC,GAA3B,YAAsCC,ICjIzB,SAASnC,IACtB,IAAMC,EAAOzJ,mBACP4B,EAAW5B,mBAEXrC,EAAOpB,GAAS,SAAAuD,GAAC,OAAIA,EAAEnC,QACvBf,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SAExB8P,EAAenF,mBAAQ,kBD6HxB,WACL,IAAMkE,EAAcX,IACdY,EAASJ,IAEf,MAAM,GAAN,mBAAWG,GAAX,YAA2BC,ICjIQiB,KAAsB,IACnDC,EAAgBrF,mBAAQ,kBAAMiE,MAAmB,IAEjD9B,EAAQnC,mBAAQ,kBAAM,IAAIoC,aAAY,IACtCC,EAAQrC,mBAAQ,WAGpB,IADA,IAAMsC,EAAO,GACJC,EAAI,EAAGA,EAAI8C,EAAc5F,OAAQ8C,IAAK,CAAC,IAAD,IACvCrI,GAAI,UAAAiL,EAAa5C,UAAb,eAAiBrI,IAAK,EAE1BE,EAAI,eAAM+K,EAAa5C,UAAnB,aAAM,EAAiBnI,IAAK,GAEtCkI,EAAKG,KAAK,CAAEvI,IAAGC,EAHL,EAGQC,MAEpB,OAAOkI,IACN,CAAC+C,EAAeF,IAEbG,EAAgCtF,mBAAQ,kBAAQ3K,EAAQ8I,EhBzBtC,EgByBiEA,MAA+B,CAAC9I,IAyCzH,OAvCA6F,aAAS,SAACzE,EAAO0E,GACfkH,EAAMlD,SAAQ,SAAC0D,EAAMN,GACnB,GAAInM,EAAKuD,QAAS,CAChB,GAAIkJ,EAAKzI,EAAIhE,EAAKuD,QAAQK,SAASI,GAAK,GACtC,GAAIyI,EAAK3I,EAAI9D,EAAKuD,QAAQK,SAASE,GAAK,IAAM2I,EAAK3I,EAAI9D,EAAKuD,QAAQK,SAASE,EAAI,GACxDsH,EAAWpL,EAAKuD,QAAQK,SAASE,EAAG9D,EAAKuD,QAAQK,SAASI,EAAGyI,EAAK3I,EAAG2I,EAAKzI,GAE5E,KACnBhD,EAASC,UAAY,EACrBD,EAAS9B,UAAW,GAKtB8B,EAASK,mBACXoL,EAAK3I,EAAImL,EAAc9C,GAAGrI,EAC1B2I,EAAK1I,EAAI,EACT0I,EAAKzI,EAAIkL,EAAgCD,EAAc9C,GAAGnI,GAK9DC,EAASV,QAAQwC,MAAQ/E,EAASQ,YAElCuK,EAAMnI,SAAS9E,IACb2N,EAAK3I,EACL2I,EAAK1I,EACL0I,EAAKzI,GAIP+H,EAAMW,eACNZ,EAAKvI,QAAQoJ,YAAYR,EAAGJ,EAAMa,WAIpCd,EAAKvI,QAAQsJ,eAAeC,aAAc,KAI1C,gCAAe9G,IAAK8F,EAAMzE,KAAM,CAAC,KAAM,KAAM4H,EAAc5F,QAA3D,UACE,mCAAmBhC,KAAM,CAAC,GAAI,GAAI,MAClC,mCAAmBrB,IAAK/B,EAAU8B,MAAOoC,EAAO,GAAGG,WCzE1C,SAAS6G,KACtB,IAAMnP,EAAOpB,GAAS,SAACuD,GAAD,OAAOA,EAAEnC,QACzBf,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SAExBmQ,EAAS/M,mBAETgN,EAAQhN,mBACRiN,EAAQjN,mBACRkN,EAAQlN,mBACRmN,EAAQnN,mBACRoN,EAAQpN,mBACRqN,EAAQrN,mBAGRsN,EAAQtN,mBACRuN,EAAQvN,mBACRwN,EAAQxN,mBACRyN,EAASzN,mBAET0N,EAAa,SAACC,GAClB,OAAQA,EAAO/Q,GjBhBO,GiBqExB,OAlDA6F,aAAS,SAACzE,EAAO0E,GACX/E,EAAKuD,SACHvC,EAASK,mBACX+N,EAAO7L,QAAQK,SAASI,EAAIhD,EAASO,mBAAqBwG,IAAgC,IAC1F4H,EAAMpM,QAAQW,SAAU,EACxB0L,EAAMrM,QAAQW,SAAU,EACxB2L,EAAMtM,QAAQW,SAAU,EACxB4L,EAAOvM,QAAQW,SAAU,GAMD,IAAxBlD,EAASI,YACXiO,EAAM9L,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxC8N,EAAM/L,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxC+N,EAAMhM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCgO,EAAMjM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCiO,EAAMlM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCkO,EAAMnM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCmO,EAAMpM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCoO,EAAMrM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCqO,EAAMtM,QAAQU,SAAS8B,MAAQ/E,EAASQ,YACxCsO,EAAOvM,QAAQU,SAAS8B,MAAQ/E,EAASQ,cAEzC6N,EAAM9L,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDgH,EAAM/L,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDiH,EAAMhM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDkH,EAAMjM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDmH,EAAMlM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDoH,EAAMnM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MAErDqH,EAAMpM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDsH,EAAMrM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDuH,EAAMtM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,MACrDwH,EAAOvM,QAAQU,SAAS8B,MAAQoC,EAAO4H,EAAW,IAAIzH,OAIxD,IAAMxC,EAAc9E,EAASM,kBAEzBwE,EAAc,IAAOsJ,EAAO7L,QAAQgC,MAAMzB,EAAI,KAChDsL,EAAO7L,QAAQgC,MAAMzB,GAAKgC,EAAcf,EAAQ,EAChDqK,EAAO7L,QAAQgC,MAAMxB,GAAK+B,EAAcf,EAAQ,GACvCqK,EAAO7L,QAAQgC,MAAMzB,EAAI,IAClCsL,EAAO7L,QAAQgC,MAAMzB,GAAKgC,EAAcf,EAAQ,GAChDqK,EAAO7L,QAAQgC,MAAMxB,GAAK+B,EAAcf,EAAQ,OAKlD,wBAAOiB,IAAKoJ,EAAZ,UACE,uBAAMpJ,IAAKqJ,EAAOzL,SAAU,CAAC,EAAG,GAAI,KAAMH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAhE,UACE,qCAAqB0D,KAAM,CAAC,IAAK,GAAI,EAAG,MACxC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMtC,IAAKsJ,EAAO1L,SAAU,CAAC,EAAG,GAAI,KAAMH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAhE,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMtC,IAAKuJ,EAAO3L,SAAU,CAAC,EAAG,GAAI,KAAMH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAhE,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMtC,IAAKwJ,EAAO5L,SAAU,CAAC,EAAG,GAAI,KAAMH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAhE,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMtC,IAAKyJ,EAAO7L,SAAU,CAAC,EAAG,GAAI,KAAMH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAhE,UACE,qCAAqB0D,KAAM,CAAC,GAAI,EAAG,EAAG,MACtC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMtC,IAAK0J,EAAO9L,SAAU,CAAC,EAAG,GAAI,KAAMH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAhE,UACE,qCAAqB0D,KAAM,CAAC,GAAI,EAAG,EAAG,MACtC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMpE,SAAS,EAAO8B,IAAK2J,EAAO/L,SAAU,CAAC,EAAG,GAAI,MAAOH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAjF,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMpE,SAAS,EAAO8B,IAAK4J,EAAOhM,SAAU,CAAC,EAAG,GAAI,MAAOH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAjF,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMpE,SAAS,EAAO8B,IAAK6J,EAAOjM,SAAU,CAAC,EAAG,GAAI,MAAOH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAjF,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,WAEpE,uBAAMpE,SAAS,EAAO8B,IAAK8J,EAAQlM,SAAU,CAAC,EAAG,GAAI,MAAOH,SAAU,CAAC,EAAG,EAAGC,KAAKC,IAAlF,UACE,qCAAqB0D,KAAM,CAAC,GAAI,GAAI,EAAG,MACvC,mCAAmBwC,KAAK,EAAOlD,OAAO,WAAWZ,MAAOoC,EAAO,GAAGG,cCvH3D,WAA0B,4CCUzC,SAAS2H,KACP,IAAMjH,EAAUtG,YAAWqH,IAErB/J,EAAOpB,GAAS,SAACuD,GAAD,OAAOA,EAAEnC,QACzBf,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SAEtBgE,EAAUC,cAAVD,MAEF8K,EAAS1L,mBAET6N,EAAU7N,mBAEV8N,EAAU9N,mBAEV+N,EAAU/N,iBAAO,IACjBgO,EAAUhO,iBAAO,GAfG,EAkBVmC,oBAAS,WAWvB,MAVe,CACb,IAAIC,UAAQ,IAAK,KACjB,IAAIA,UAAQ,GAAI,KAChB,IAAIA,UAAQ,GAAI,KAChB,IAAIA,UAAQ,GAAI,KAChB,IAAIA,UAAQ,GAAI,KAChB,IAAIA,UAAQ,GAAI,SAPbG,EAlBmB,sBAgCTJ,oBAAS,WAUxB,MATe,CACb,IAAIC,UAAQ,GAAI,KAChB,IAAIA,UAAQ,IAAK,KACjB,IAAIA,UAAQ,IAAK,KACjB,IAAIA,UAAQ,IAAK,MACjB,IAAIA,UAAQ,IAAK,MACjB,IAAIA,UAAQ,GAAI,MAChB,IAAIA,UAAQ,GAAI,UARb6L,EAhCmB,oBA6C1B9M,2BAAgB,WACdwF,EAAQ7E,MAAQ6E,EAAQ5E,MAAQC,yBAChC2E,EAAQ1E,OAAOxF,IAAI,GAAI,GACvBkK,EAAQzE,WAAa,KACpB,CAACyE,IAEJ,IAAMuH,EAAa3G,mBAAQ,kBAAO,KAAO7B,GnBnDjB,EmBmD+B9I,KAAqB,CAACA,IACvEuR,EAAa5G,mBAAQ,kBAAO,KAAO7B,GnBpDjB,EmBoD+B9I,KAAqB,CAACA,IACvEwR,EAAiB7G,mBAAQ,kBAAO,KAAO7B,GnBrDrB,GmBqDoC9I,EAAQ,MAAkB,CAACA,IACjFyR,EAAiB9G,mBAAQ,kBAAO,KAAO7B,GnBtDrB,GmBsDoC9I,EAAQ,MAAkB,CAACA,IA4CvF,OA1CA6F,aAAS,SAACzE,EAAO0E,GACX/E,EAAKuD,SACHvC,EAASK,mBACX0M,EAAOxK,QAAQK,SAASI,EAAIuM,EAAa,GACzCL,EAAQ3M,QAAQK,SAASI,EAAIuM,EAAa,IAI1CvQ,EAAKuD,UACFvD,EAAKuD,QAAQK,SAASI,EAAIuM,GAAcvQ,EAAKuD,QAAQK,SAASI,EAAIwM,GACpExQ,EAAKuD,QAAQK,SAASI,EAAIyM,GAAkBzQ,EAAKuD,QAAQK,SAASI,EAAI0M,EACvER,EAAQ3M,QAAQW,SAAU,EAE1BgM,EAAQ3M,QAAQW,SAAU,GAK9BmM,EAAQ9M,QAAU,GAA+C,IAAxCG,KAAK0B,IAAInC,EAAMiC,iBAAmB,GAC3DkL,EAAQ7M,QAAU,EAA6C,EAAxCG,KAAK0B,IAAInC,EAAMiC,iBAAmB,GAEzD6I,EAAOxK,QAAQU,SAAS2B,IAAIC,OAAO/B,GAAK,IAAOiB,EAAQ,IACvDgJ,EAAOxK,QAAQU,SAAS2B,IAAIC,OAAO9B,GAAK,KAAQgB,EAAQ,IACxDgJ,EAAOxK,QAAQU,SAAS2B,IAAItB,OAAOxF,IAAIsR,EAAQ7M,QAAS8M,EAAQ9M,SAChEwK,EAAOxK,QAAQU,SAASuD,SAAWxG,EAASQ,YAC5C0O,EAAQ3M,QAAQU,SAAS2B,IAAIC,OAAO/B,GAAK,IAAOiB,EAAQ,IACxDmL,EAAQ3M,QAAQU,SAAS2B,IAAIC,OAAO9B,GAAK,KAAQgB,EAAQ,IACzDmL,EAAQ3M,QAAQU,SAAS2B,IAAItB,OAAOxF,IAAIsR,EAAQ7M,QAAS8M,EAAQ9M,SACjE2M,EAAQ3M,QAAQU,SAASuD,SAAWxG,EAASQ,YAG7C,IAAMsE,EAAc9E,EAASM,kBAEzBwE,EAAc,IAAOqK,EAAQ5M,QAAQgC,MAAMzB,EAAI,KACjDqM,EAAQ5M,QAAQgC,MAAMzB,GAAKgC,EAAcf,EAAQ,EACjDoL,EAAQ5M,QAAQgC,MAAMxB,GAAK+B,EAAcf,EAAQ,GACxCoL,EAAQ5M,QAAQgC,MAAMzB,EAAI,IACnCqM,EAAQ5M,QAAQgC,MAAMzB,GAAKgC,EAAcf,EAAQ,GACjDoL,EAAQ5M,QAAQgC,MAAMxB,GAAK+B,EAAcf,EAAQ,OAKnD,wBAAOiB,IAAKmK,EAAZ,UACE,uBAAMnK,IAAK+H,EAAQnK,SAAU,CAAC,EAAG,GAAI,MAAOH,SAAU,CAAC,GAAIC,KAAKC,GAAK,EAAGD,KAAKC,GAAK,GAAlF,UACE,qCAAqB0D,KAAM,CAACzC,EAAO,MACnC,sCAAsBiF,KAAK,EAAOlD,OAAO,WAAW8D,KAAMC,WAAUjD,kBAAmB,GAAKD,SAAUW,EAAO,GAAGG,MAAO1C,IAAKoD,OAE9H,uBAAM9E,SAAS,EAAO8B,IAAKkK,EAAStM,SAAU,CAAC,EAAG,GAAI,MAAOH,SAAU,CAAC,GAAIC,KAAKC,GAAK,EAAGD,KAAKC,GAAK,GAAnG,UACE,qCAAqB0D,KAAM,CAACiJ,EAAQ,MACpC,sCAAsBzG,KAAK,EAAOlD,OAAO,WAAW8D,KAAMC,WAAUjD,kBAAmB,GAAKD,SAAUW,EAAO,GAAGG,MAAO1C,IAAKoD,UAMrH,SAAS2H,KACtB,OACE,cAAC,WAAD,CAAU9I,SAAU,KAApB,SACE,cAACoI,GAAD,MCzHS,SAASW,KAGtB,OACE,qCACE,cAAC,EAAD,IACA,cAACzB,GAAD,IACA,cAAC,GAAD,O,mECMS,SAAS0B,KACtB,IAAMC,EAAWzO,mBADe,EAEIa,cAA5B6N,EAFwB,EAExBA,MAAOC,EAFiB,EAEjBA,GAAI/C,EAFa,EAEbA,KAAMlO,EAFO,EAEPA,OAEnBkR,EAAc5O,iBAAO,GAErBjD,EAAeR,GAAS,SAAAuD,GAAC,OAAIA,EAAE/C,gBAuBrC,OArBAiE,qBAAU,WAAWyN,EAASvN,QAAQ2N,QAAQjD,EAAKkD,MAAOlD,EAAKmD,UAAS,CAACnD,IACzEnJ,aAAS,SAACzE,EAAO0E,GACf,GAAI3F,EAAc,CAChB,IAAMiS,EAAQP,EAASvN,QAAQ+N,OAAO,GAKlCtQ,EAASM,kBAAoB2P,EAAY1N,QAC3C0N,EAAY1N,QAAUvC,EAASM,kBAE/B2P,EAAY1N,SAAmB,GAARwB,EAGzBsM,EAAME,SAAWN,EAAY1N,QAAU,GAAM0N,EAAY1N,QAAU,GAGrEuN,EAASvN,QAAQiO,WAChB,GAID,iCAAgBxL,IAAK8K,EAAUzJ,KAAM,CAAC2J,GAAtC,UACE,4BAAYS,YAAY,SAASV,MAAOA,EAAOhR,OAAQA,IACvD,iCAAiB0R,YAAY,SAASpK,KAAM,MAACqK,EAAW,GAAuB,EAAG,MAClF,4BAAYD,YAAY,SAASpK,KAAM,CAACsK,MAAaC,qCAAoC,CAAC,EAAI3D,EAAKkD,MAAO,EAAIlD,EAAKmD,aAtCzHS,YAAO,CAAEC,oBAAgBC,gBAAYC,gBAAYC,qBAAiBC,cAAUC,sBCT5E,IAAMC,GAAU,GAEhB,SAASC,GAAQC,EAAQC,GAAmB,IAAZC,IAAW,yDACzCnP,qBAAU,WACR,IAAMoP,EAAc,SAACC,GACnB,IAA+B,IAA3BJ,EAAOK,QAAQD,EAAEE,KAAa,CAChC,IAAMC,IAAgBT,GAAQM,EAAEI,SAChCV,GAAQM,EAAEI,UAAW,GACjBN,GAAOK,GAAaN,GAAM,KAI5BQ,EAAY,SAACL,IACc,IAA3BJ,EAAOK,QAAQD,EAAEE,OACnBR,GAAQM,EAAEI,UAAW,EACjBN,GAAID,GAAM,KAMlB,OAFAS,OAAOC,iBAAiB,UAAWR,EAAa,CAAES,SAAS,IAC3DF,OAAOC,iBAAiB,QAASF,EAAW,CAAEG,SAAS,IAChD,WACLF,OAAOG,oBAAoB,UAAWV,GACtCO,OAAOG,oBAAoB,QAASJ,MAErC,CAACT,EAAQC,EAAOC,IAGN,SAASY,KACtB,IAAMtU,EAAMF,GAAS,SAACyB,GAAD,OAAWA,EAAMvB,OAItC,OAHAuT,GAAQ,CAAC,YAAa,IAAK,MAAM,SAAC1S,GAAD,OAAUb,GAAI,SAACuB,GAAD,mBAAC,eAAgBA,GAAjB,IAAwBX,SAAS,2BAAMW,EAAMX,UAAb,IAAuBC,iBACtG0S,GAAQ,CAAC,aAAc,IAAK,MAAM,SAACzS,GAAD,OAAWd,GAAI,SAACuB,GAAD,mBAAC,eAAgBA,GAAjB,IAAwBX,SAAS,2BAAMW,EAAMX,UAAb,IAAuBE,kBAEjG,KC7BT,IAAMyT,GAAe,SAAAlR,GAAC,OAAIA,EAAEnC,MACtBsT,GAAmB,SAAAnR,GAAC,OAAIA,EAAE1B,UAC1B8S,GAAsB,SAAApR,GAAC,OAAIA,EAAEhD,aAC7BqU,GAA0B,SAAArR,GAAC,OAAIA,EAAE7B,iBACjCmT,GAAsB,SAAAtR,GAAC,OAAIA,EAAEvB,aAEpB,SAAS8S,KACtB,IAAM1T,EAAOpB,EAASyU,IAChB5S,EAAW7B,EAAS0U,IACpBnU,EAAcP,EAAS2U,IACvBjT,EAAkB1B,EAAS4U,IAC3B5S,EAAchC,EAAS6U,IAEvBxU,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SA6C9B,OA3CAoE,qBAAU,WACRrC,EAASO,oBAAuBtC,EAAQ8I,EvBblB,IuBcrB,CAAC9I,IAEJoE,qBAAU,WACJlE,IACF6B,EAASE,avBTmB,MuBW7B,CAAC/B,IAIJ2F,aAAS,SAACzE,EAAO0E,GAGf,IAAMC,EAAa,EAAID,EAAQ,IAC3B5F,IAAgB6B,EAAS9B,WACvB8B,EAASC,UAAYD,EAASE,cAChCZ,GAAgB,GACZU,EAASC,UAAY+D,EAAahE,EAASE,aAC7CF,EAASC,UAAYD,EAASE,aAE9BF,EAASC,WAAa+D,GAGxB1E,GAAgB,IAIhBN,EAAKuD,UAEPvC,EAAShC,MAAQ0E,KAAK8B,IAAIxF,EAAKuD,QAAQK,SAASI,GAAK,GAGrDhD,EAASK,iBAAmBrB,EAAKuD,QAAQK,SAASI,GAAK,KAAOhE,EAAKuD,QAAQK,SAASI,EAAIhD,EAASO,mBAAqB,KAAOvB,EAAKuD,QAAQK,SAASI,EAAIhD,EAASO,mBAAqB,KAGnLpC,GAAe6B,EAAS9B,WAC1BuB,EAASiD,KAAK8B,IAAIxF,EAAKuD,QAAQK,SAASI,GAAK,IAC7CpD,GAAY,OAIT,KCxDM,SAAS+S,GAAT,GAAsC,EAAfC,YAAgB,IAC9CC,EAAaxR,iBAAO,GACpByR,EAAgBzR,iBAAO,GAEvB0R,EAAgB1R,iBAAO,GACvB2R,EAAgB3R,iBAAO,GACvB4R,EAAgB5R,iBAAO,GACvB6R,EAAgB7R,iBAAO,GACvB8R,EAAgB9R,iBAAO,GAsD7B,OApDAyC,aAAS,SAACzE,EAAO0E,GAOf,GAL4B,IAAxB/D,EAASI,YACXJ,EAASQ,YAAY1C,IAAIqJ,EAAO,GAAGG,OAIT,IAAxBtH,EAASI,WAAkB,CAC7B,IAAMgT,EAAuB,EAARrP,EAEjBgP,EAAcxQ,QAAU,GAC1BwQ,EAAcxQ,SAAW6Q,EACzBpT,EAASQ,YAAY6S,WAAWlM,EAAO,GAAGG,MAAOH,EAAO,GAAGG,MAAOyL,EAAcxQ,UACvEyQ,EAAczQ,QAAU,GACjCyQ,EAAczQ,SAAW6Q,EACzBpT,EAASQ,YAAY6S,WAAWlM,EAAO,GAAGG,MAAOH,EAAO,GAAGG,MAAO0L,EAAczQ,UACvE0Q,EAAc1Q,QAAU,GACjC0Q,EAAc1Q,SAAW6Q,EACzBpT,EAASQ,YAAY6S,WAAWlM,EAAO,GAAGG,MAAOH,EAAO,GAAGG,MAAO2L,EAAc1Q,UACvE2Q,EAAc3Q,QAAU,GACjC2Q,EAAc3Q,SAAW6Q,EACzBpT,EAASQ,YAAY6S,WAAWlM,EAAO,GAAGG,MAAOH,EAAO,GAAGG,MAAO4L,EAAc3Q,UACvE4Q,EAAc5Q,QAAU,GACjC4Q,EAAc5Q,SAAW6Q,EACzBpT,EAASQ,YAAY6S,WAAWlM,EAAO,GAAGG,MAAOH,EAAO,GAAGG,MAAO6L,EAAc5Q,WAEhFwQ,EAAcxQ,QAAU,EACxByQ,EAAczQ,QAAU,EACxB0Q,EAAc1Q,QAAU,EACxB2Q,EAAc3Q,QAAU,EACxB4Q,EAAc5Q,QAAU,GAG1BuQ,EAAcvQ,QAAU,OAGfvC,EAASI,WAAa0S,EAAcvQ,UAC7CvC,EAASQ,YAAY6S,WAAWlM,EAAO2L,EAAcvQ,SAAS+E,MAAOH,EAAOnH,EAASI,YAAYkH,MAAOuL,EAAWtQ,SAE/GsQ,EAAWtQ,QAAWwB,EAAQ/D,EAASC,UAAa,GAAM,EAC5D4S,EAAWtQ,QAAU,EAErBsQ,EAAWtQ,SAAYwB,EAAQ/D,EAASC,UAAa,GAG5B,IAAvB4S,EAAWtQ,UACbuQ,EAAcvQ,QAAUvC,EAASI,WACjCyS,EAAWtQ,QAAU,OAKpB,KCvEM,WAA0B,uCCA1B,OAA0B,yCCA1B,OAA0B,2CCazC,SAAS+Q,KACP,IAAMC,EAAclS,mBACdmS,EAAcnS,mBACdoS,EAAapS,mBAEbqS,EAAcrS,mBAEdjD,EAAeR,GAAS,SAAAuD,GAAC,OAAIA,EAAE/C,gBAC/BD,EAAcP,GAAS,SAAAuD,GAAC,OAAIA,EAAEhD,eAC9BD,EAAWN,GAAS,SAAAuD,GAAC,OAAIA,EAAEjD,YAC3Ba,EAASnB,GAAS,SAAAuD,GAAC,OAAIA,EAAEpC,UACzBd,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SACxBkB,EAAgBvB,GAAS,SAAAuD,GAAC,OAAIA,EAAEhC,iBAZvB,EAcIqE,oBAAS,kBAAM,IAAImQ,mBAA/BC,EAdQ,oBAgBTC,EAAaC,YAAUC,cAAaC,IACpCC,EAAYH,YAAUC,cAAaG,IACnCC,EAAiBL,YAAUC,cAAaK,IAExCC,EAAchT,mBACdiT,EAAgBjT,mBAEhBkT,EAAclT,iBAAO,GACrBmT,EAAcnT,iBAAO,GACrBoT,EAAapT,iBAAO,GAEpBqT,EAAerT,kBAAO,GACtBsT,EAAiBtT,kBAAO,GAyJ9B,OAvJAgB,qBAAU,WACJlD,GAAiBf,GACnBmV,EAAYhR,QAAQqS,QAAQC,WAE7B,CAAC1V,EAAef,IAEnBiE,qBAAU,WACRkR,EAAYhR,QAAQuS,UAAUjB,KAC7B,CAACA,IAGJxR,qBAAU,WACRmR,EAAYjR,QAAQuS,UAAUb,GAC9BI,EAAY9R,QAAUiR,EAAYjR,QAAQqS,QAAQG,qBAClDV,EAAY9R,QAAQyS,KAAO,UAC3BX,EAAY9R,QAAQ0S,UAAUC,MAAQ,EACtC1B,EAAYjR,QAAQ4S,UAAUd,EAAY9R,WAEzC,CAAC0R,IAEJ5R,qBAAU,WACRoR,EAAWlR,QAAQuS,UAAUX,GAE7BG,EAAc/R,QAAU,IAAI6S,gBAAc3B,EAAWlR,QAAS,MAC7D,CAAC4R,IAEJ9R,qBAAU,WACY,IAAD,IAAdjE,KACH,UAAImV,EAAYhR,eAAhB,aAAI,EAAqB8S,YACvB9B,EAAYhR,QAAQ+S,QAGtB,UAAI9B,EAAYjR,eAAhB,aAAI,EAAqB8S,aACvB7B,EAAYjR,QAAQ+S,OACpB7B,EAAWlR,QAAQ+S,WAItB,CAAClX,IAEJiE,qBAAU,WAMA,IAAD,EALHjE,IAAiBF,EACdqV,EAAYhR,QAAQ8S,YACvB9B,EAAYhR,QAAQgT,OACpBb,EAAanS,SAAU,IAGzB,UAAIgR,EAAYhR,eAAhB,aAAI,EAAqB8S,YACvB9B,EAAYhR,QAAQ+S,OAQxB,GAJA/B,EAAYhR,QAAQiT,SAAQ,GAC5BhC,EAAYjR,QAAQiT,SAAQ,GAC5B/B,EAAWlR,QAAQiT,SAAQ,GAEvBzW,EAAOwD,QAAS,CAClB,IAAMkT,EAAM1W,EAAOwD,QAEnB,OADAkT,EAAIC,IAAI9B,GACD,kBAAM6B,EAAIE,OAAO/B,OAGzB,CAACxV,EAAcyV,EAAYI,EAAWE,EAAgBhW,EAAaD,EAAUa,EAAQ6U,IAExFvR,qBAAU,WACJpE,EAAQ,GAAKA,EAAQ,IAAM,GAC7BuV,EAAYjR,QAAQqT,gBAAgB,EAAY,IAAR3X,GACxCwV,EAAWlR,QAAQqT,gBAAgB,EAAY,IAAR3X,IACpB,IAAVA,IACTuV,EAAYjR,QAAQqT,gBAAgB,GACpCnC,EAAWlR,QAAQqT,gBAAgB,MAEpC,CAAC3X,IAEJ6F,aAAS,SAACzE,EAAO0E,GACf,GAAI3F,EAAc,CAEhB,GAAIkW,EAAc/R,QAAS,CACzB,IAAMsT,EAAaC,YAAUC,YAAY,EAAG,IAAKzB,EAAc/R,QAAQyT,mBAAmB,IAC1FhW,EAASM,kBAAoBuV,EAI3B1X,IAAgBqV,EAAYjR,QAAQ8S,WAClC9B,EAAYhR,QAAQqS,QAAQqB,YAAYC,QAAQ,GAAK,MAAQ,IAC/DvB,EAAepS,SAAU,EACzBiR,EAAYjR,QAAQgT,OACpB9B,EAAWlR,QAAQgT,OACnB/B,EAAYjR,QAAQ4T,UAAU,GAC9B1C,EAAWlR,QAAQ4T,UAAU,IAK7BhY,IAAgBD,GAAYsW,EAAYjS,QAAU,IAC/CiR,EAAYjR,QAAQ8S,YACvB7B,EAAYjR,QAAQgT,OACpB9B,EAAWlR,QAAQgT,QAGrBlB,EAAY9R,QAAQ0S,UAAUC,OAAiB,IAARnR,EAEnCyQ,EAAYjS,QAAkB,GAARwB,EAAc,GACtCyQ,EAAYjS,QAAU,EACtBkS,EAAWlS,QAAU,IAErBiS,EAAYjS,SAAmB,GAARwB,EACvB0Q,EAAWlS,SAAmB,GAARwB,GAGpBwQ,EAAYhS,QAAkB,GAARwB,EAAc,EACtCwQ,EAAYhS,QAAU,EAEtBgS,EAAYhS,SAAmB,GAARwB,EAGzBwP,EAAYhR,QAAQ4T,UAAU5B,EAAYhS,SAC1CiR,EAAYjR,QAAQ4T,UAAU3B,EAAYjS,SAC1CkR,EAAWlR,QAAQ4T,UAAU1B,EAAWlS,UAKtCrE,GAAYqW,EAAYhS,QAAU,IAC/BgR,EAAYhR,QAAQ8S,WACvB9B,EAAYhR,QAAQgT,OAGtBlB,EAAY9R,QAAQ0S,UAAUC,OAAiB,IAARnR,EAEnCyQ,EAAYjS,QAAkB,GAARwB,EAAc,GACtCyQ,EAAYjS,QAAU,EACtBkS,EAAWlS,QAAU,IAErBiS,EAAYjS,SAAmB,GAARwB,EACvB0Q,EAAWlS,SAAmB,GAARwB,GAGpBwQ,EAAYhS,QAAkB,GAARwB,EAAc,EACtCwQ,EAAYhS,QAAU,EAEtBgS,EAAYhS,SAAmB,GAARwB,EAGzBwP,EAAYhR,QAAQ4T,UAAU5B,EAAYhS,SAC1CiR,EAAYjR,QAAQ4T,UAAU3B,EAAYjS,SAC1CkR,EAAWlR,QAAQ4T,UAAU1B,EAAWlS,cAM5C,wBAAOyC,IAAK0O,EAAZ,UACE,uBAAO1O,IAAKuO,EAAalN,KAAM,CAACuN,KAChC,uBAAO5O,IAAKwO,EAAanN,KAAM,CAACuN,KAChC,uBAAO5O,IAAKyO,EAAYpN,KAAM,CAACuN,QAKtB,SAASwC,KAEtB,OACE,cAAC,WAAD,CAAUvP,SAAU,KAApB,SACE,cAACyM,GAAD,MC/MS,WAA0B,oCCQzC,SAAS+C,KACP,IAAMC,EAAQjV,mBACRqS,EAAcrS,mBAGdtC,EAASnB,GAAS,SAAAuD,GAAC,OAAIA,EAAEpC,UACzBX,EAAeR,GAAS,SAAAuD,GAAC,OAAIA,EAAE/C,gBAC/BH,EAAQL,GAAS,SAAAuD,GAAC,OAAIA,EAAElD,SACxBE,EAAcP,GAAS,SAAAuD,GAAC,OAAIA,EAAEhD,eARrB,EAUIqF,oBAAS,kBAAM,IAAImQ,mBAA/BC,EAVQ,oBAYT2C,EAAezC,YAAUC,cAAayC,IA0B5C,OAvBAnU,qBAAU,WASR,GARAiU,EAAM/T,QAAQuS,UAAUyB,GAEpBnY,EACFkY,EAAM/T,QAAQ4T,UAAU,IAExBG,EAAM/T,QAAQ4T,UAAU,GAGtBpX,EAAOwD,QAAS,CAClB,IAAMkT,EAAM1W,EAAOwD,QAEnB,OADAkT,EAAIC,IAAI9B,GACD,kBAAM6B,EAAIE,OAAO/B,OAEzB,CAAC2C,EAAcnY,EAAcW,EAAQ6U,IAExCvR,qBAAU,WACJlE,GAAeF,EAAQ,IACzBqY,EAAM/T,QAAQuS,UAAUyB,GACxBD,EAAM/T,QAAQgT,UAEf,CAACpX,EAAaF,EAAOsY,IAGtB,uBAAOvR,IAAK0O,EAAZ,SACE,uBAAO1O,IAAKsR,EAAOjQ,KAAM,CAACuN,OAKjB,SAAS6C,KAEtB,OACE,cAAC,WAAD,CAAU5P,SAAU,KAApB,SACE,cAACwP,GAAD,M,aCvDAK,GAA2B,SAACC,GAAD,gDAAiBA,EAAET,QAAQ,GAA3B,MAElB,SAASU,GAAT,GAIX,IAHFC,EAGC,EAHDA,OACAC,EAEC,EAFDA,SAEC,IADDC,yBACC,MADmBL,GACnB,EACKM,EAAcC,SAAa,GAC3BC,EAASD,SAAa,GACtBE,EAAkBF,SAAa,MAE/BG,EAAiBH,eAAkB,WAClCE,EAAgB5U,UACrByU,EAAYzU,UAAYuU,EAAWE,EAAYzU,SAAW,GACtDyU,EAAYzU,QAAU,IAAOuU,GAAyB,MAAbA,KAC3CE,EAAYzU,QAAUuU,GACxBK,EAAgB5U,QAAQ8U,UAAYN,EAAkBC,EAAYzU,SAC9DyU,EAAYzU,QAAUuU,IACxBI,EAAO3U,QAAU+U,sBAAsBF,OACxC,CAACL,EAAmBD,IAOvB,OALAG,aAAgB,WAEd,OADAG,IACO,kBAAMG,qBAAqBL,EAAO3U,YACxC,CAAC6U,IAGF,qBAAKI,MAAK,2BAAOC,GAAOC,WAAd,IAAyBnR,QAASsQ,EAAS,EAAI,IAAzD,SACE,8BACE,sBAAKW,MAAK,eAAOC,GAAOE,OAAxB,UACE,qBACEH,MAAK,2BAAOC,GAAOG,KAAd,IAAmBC,UAAU,UAAD,OAAYf,EAAW,IAAvB,SAEnC,qBAAKU,MAAO,CAAEM,UAAW,UAAzB,SACE,sBAAM9S,IAAKmS,EAAiBK,MAAK,eAAOC,GAAOM,iBAQ3D,IAAMN,GAAS,CACbC,UAAW,CACTM,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,WAAY,qBACZC,OAAQ,KAEVT,MAAO,CACLxH,MAAO,IACPC,OAAQ,GACRiI,UAAW,SACXC,aAAc,MACdC,UAAW,uBACXC,OAAQ,qBAEVZ,IAAK,CACHxH,OAAQ,GACRD,MAAO,OACPsI,WAAY,UACZN,WAAY,kBACZO,gBAAiB,cACjBH,UAAW,wBAEbR,KAAM,CACJM,UAAW,SACXM,mBAAoB,eACpBb,UAAW,OACX/S,MAAO,UACP6T,SAAU,MACVC,WAAW,kNACXC,WAAY,SACZC,WAAY,qB,MC1ED,SAASC,KACtB,OACE,qBAAKC,UAAU,SAAf,SACE,mBACE3H,OAAO,SACP4H,IAAI,aACJC,KAAK,+BAHP,oDCLS,WAA0B,yCCiG1BC,I,MAvFC,WAAO,IAAD,EACM5V,oBAAS,GADf,mBACb6V,EADa,KACNC,EADM,OAEQ9V,oBAAS,GAFjB,mBAEb+V,EAFa,KAELC,EAFK,OAGchW,oBAAS,GAHvB,mBAGbiW,EAHa,KAGFC,EAHE,OAISC,eAArB9C,EAJY,EAIZA,OAAQC,EAJI,EAIJA,SAEV3Y,EAAcP,GAAS,SAACuD,GAAD,OAAOA,EAAEhD,eAChCD,EAAWN,GAAS,SAACuD,GAAD,OAAOA,EAAEjD,YAC7BwB,EAAiB9B,GAAS,SAACuD,GAAD,OAAOA,EAAEzB,kBACnCtB,EAAeR,GAAS,SAACuD,GAAD,OAAOA,EAAE/C,gBACjC0B,EAAclC,GAAS,SAACuD,GAAD,OAAOA,EAAErB,eAChCV,EAAmBxB,GAAS,SAACuD,GAAD,OAAOA,EAAE/B,oBAE3CiD,qBAAU,WACJlE,GAAeD,EACjBob,GAAS,GACCnb,GACVmb,GAAS,KAEV,CAACnb,EAAa0Y,EAAQ3Y,IAEzBmE,qBAAU,WACR,IAAIuX,EAEJ,OADIH,IAAcF,IAAQK,EAAIC,YAAW,kBAAML,GAAWC,KAAY,MAC/D,kBAAMK,aAAaF,MACzB,CAACH,EAAWF,IAEflX,qBAAU,WACR9D,aAAawb,QAAQ,eAAgB1b,KAAK2b,UAAU5b,MACnD,CAACA,IAEJiE,qBAAU,WACJyU,GAAY,KACd4C,GAAa,KAEd,CAAC5C,IAUJ,OAAOuC,EACL,qBACEY,QAAS,kBAAM7a,KACf6Z,UAAS,kBACTzB,MAAO,CACLjR,QAAS8S,EAAQ,EAAI,EACrBZ,WAAYc,EAAS,YAAc,aALvC,SAQE,sBAAKN,UAAU,aAAf,UACE,qBAAKA,UAAU,aAAaiB,IAAKC,GAAaC,IAAI,iBAClD,qBAAKnB,UAAU,qBAAf,SACIQ,EAGA,qCACE,wBAAQQ,QAxBA,WAClBva,GAAe,IAuByBuZ,UAAU,oBAAxC,SACG,iCAEH,sBAAKA,UAAU,qBAAf,UACE,wBACEgB,QAzBI,WAClBna,GAAa1B,IAyBC6a,UAAU,4CAFZ,kCAGU7a,EAAe,SAAM,SAH/B,QAIA,uBAAM6a,UAAU,sBAAhB,UACE,mDACA,gLACA,wJAEF,sBAAMA,UAAU,qBAAhB,oGAGA,cAACD,GAAD,UAnBJ,cAAC,GAAD,CAAQnC,OAAQA,EAAQC,SAAUA,WA0BxC,O,SCtFAuD,I,MAAW,4BAA+B,IAArBra,EAASC,WAAiBiW,QAAQ,MACvDoE,GAAW,2BAASta,EAAShC,MAAMkY,QAAQ,KAElC,SAASqE,KACtB,IAAMzc,EAAMF,GAAS,SAACyB,GAAD,OAAWA,EAAMvB,OAChCG,EAAQL,GAAS,SAACuD,GAAD,OAAOA,EAAElD,SAE1BC,EAAWN,GAAS,SAACuD,GAAD,OAAOA,EAAEjD,YAC7BC,EAAcP,GAAS,SAACuD,GAAD,OAAOA,EAAEhD,eAChCM,EAAeb,GAAS,SAACuD,GAAD,OAAOA,EAAE1C,gBANX,EAQF+E,oBAAS,GARP,mBAQrB6V,EARqB,KAQdC,EARc,OAUY9V,oBAAS,GAVrB,mBAUrBgX,EAVqB,KAUPC,EAVO,OAWGjX,oBAAS,GAXZ,mBAWrB7E,EAXqB,KAWf+b,EAXe,OAYKlX,oBAAS,GAZd,mBAYrB5E,EAZqB,KAYd+b,EAZc,KAexBC,EAAOC,KAAKC,MAEVC,EAAW1Z,mBACX2Z,EAAW3Z,mBAEb4Z,EAAeZ,KACfa,EAAeZ,KAwDnB,OAtDAjY,qBAAU,kBACR8Y,aAAU,WACR,IAAML,EAAMD,KAAKC,MAEbA,EAAMF,EAAO,UAEXG,EAASxY,UACXwY,EAASxY,QAAQ8U,UAAYgD,MAG3BW,EAASzY,UACXyY,EAASzY,QAAQ8U,UAAYiD,MAI/BM,EAAOE,SAKbzY,qBAAU,WACJmY,IACFxI,OAAOoJ,cAAgB,SAAU7J,GAG/B,OAFAA,EAAM8J,iBACN9J,EAAM+J,mBACC,MAGV,CAACd,IAEJnY,qBAAU,WAENiX,KADEnb,GAAgBD,MAKnB,CAACC,EAAaD,IAEjBmE,qBAAU,WACJkZ,YACFd,GAAgB,GAEhBA,GAAgB,KAEjB,IAEHpY,qBAAU,WACRvE,GAAI,SAACuB,GAAD,mBAAC,eAAgBA,GAAjB,IAAwBX,SAAS,2BAAMW,EAAMX,UAAb,IAAuBC,gBAC1D,CAACb,EAAKa,IAET0D,qBAAU,WACRvE,GAAI,SAACuB,GAAD,mBAAC,eAAgBA,GAAjB,IAAwBX,SAAS,2BAAMW,EAAMX,UAAb,IAAuBE,iBAC1D,CAACd,EAAKc,IAEFya,EACL,sBAAKJ,UAAU,MAAf,UACGhb,EAAQ,GAAKQ,GACZ,qBAAKwa,UAAU,SAAf,SACE,oBAAIA,UAAU,kBAAd,wBAGHuB,GACC,sBAAKvB,UAAU,WAAf,UACE,wBACEuC,aAAc,kBAAMd,GAAe,IACnCe,WAAY,kBAAMf,GAAe,IACjCzB,UAAS,gCAA2Bta,EAAO,iBAAmB,IAHhE,SAKG,MAEH,wBACE6c,aAAc,kBAAMb,GAAgB,IACpCc,WAAY,kBAAMd,GAAgB,IAClC1B,UAAS,iCACPra,EAAQ,iBAAmB,IAJ/B,SAOG,SAIP,qBAAKqa,UAAU,aAAf,SACE,sBAAKA,UAAS,gBAAWuB,EAAe,sBAAwB,IAAhE,UACE,oBAAIvB,UAAU,eAAd,0BACA,oBAAIA,UAAU,gBAAd,SAA+Bhb,EAAQ,IACvC,oBAAIgb,UAAU,eAAd,uCACA,oBAAIjU,IAAK+V,EAAU9B,UAAU,gBAA7B,SACGgC,IAEH,oBAAIhC,UAAU,eAAd,0BACA,oBAAIjU,IAAKgW,EAAU/B,UAAU,gBAA7B,SACGiC,YAKP,KC1HN,IAyFeQ,GAzFQ,WACrB,IAAMC,EAAiBpd,aAAaC,QAAQ,cACxCH,KAAKC,MAAMC,aAAaC,QAAQ,eADb,YAEf+N,MAAM,GAAGqP,KAAK,IAHK,EAIDpY,oBAAS,GAJR,mBAIpB6V,EAJoB,KAIbC,EAJa,OAKC9V,oBAAS,GALV,mBAKpB+V,EALoB,KAKZC,EALY,OAMShW,mBAASmY,GANlB,mBAMpBE,EANoB,KAMRC,EANQ,KAQrB5d,EAAWN,GAAS,SAACuD,GAAD,OAAOA,EAAEjD,YAC7BF,EAAQJ,GAAS,SAACuD,GAAD,OAAOA,EAAEnD,SAEhCqE,qBAAU,WACR,IAAIuX,EAEJ,OADI1b,IAAaqb,IAAQK,EAAIC,YAAW,kBAAML,EAAUtb,KAAW,MAC5D,kBAAM4b,aAAaF,MACzB,CAAC1b,EAAUqb,IAEdlX,qBAAU,WAENiX,IADEpb,KAKH,CAACA,IAEJmE,qBAAU,WACR,GAAInE,GACE2d,EAAWE,MAAK,SAACC,GAAD,OAAmBhe,EAAQge,KAAgB,CAC7D,IAAMC,EAAeJ,EAAWK,MAAK,SAACzR,EAAGC,GAAJ,OAAUD,EAAIC,KACnDuR,EAAa,GAAKje,EAAMkY,QAAQ,GAChC,IAAMiG,EAAiBF,EAAaC,MAAK,SAACzR,EAAGC,GAAJ,OAAUA,EAAID,KAEvDqR,EAAcK,GACd5d,aAAawb,QAAQ,aAAc1b,KAAK2b,UAAUmC,OAGrD,CAACje,EAAU2d,EAAY7d,IAM1B,OAAOqb,EACL,qBACEJ,UAAU,kBACVzB,MAAO,CACLjR,QAAS8S,EAAQ,EAAI,EACrBZ,WAAYc,EAAS,YAAc,aAJvC,SAOE,sBAAKN,UAAU,aAAf,UACE,qBACEA,UAAU,mBACV9I,MAAM,QACN+J,IAAKC,GACLC,IAAI,iBAEN,oBAAInB,UAAU,uBAAd,sCACA,sBAAKA,UAAU,uBAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,oBAAIA,UAAU,oBAAd,4CACA,oBAAIA,UAAU,cAAd,SAA6Bjb,EAAMkY,QAAQ,QAE7C,sBAAK+C,UAAU,oBAAf,UACE,oBAAIA,UAAU,oBAAd,gCACC4C,EAAWjX,KAAI,SAACwX,EAAUjR,GAAX,OACd,sBAA2B8N,UAAU,wBAArC,UACE,sBAAMA,UAAU,qBAAhB,SAAsC9N,EAAI,IAC1C,sBACEqM,MAAO,CACL6E,eACEre,EAAMkY,QAAQ,KAAOkG,EAAW,YAAc,QAElDnD,UAAU,oBALZ,SAOGmD,EAAW,EAAIA,EAAW,QAT/B,UAAajR,EAAb,YAAkBnN,aAexB,wBAAQic,QA3CQ,WACpBjI,OAAOsK,SAASC,UA0CoBtD,UAAU,oBAA1C,2DAKF,MClES,SAASuD,GAAT,GAAuC,EAAlBzX,MAAmB,IAAZ0X,EAAW,EAAXA,QACnC5d,EAAmBjB,GAAS,SAACuD,GAAD,OAAOA,EAAEtC,oBAE3C,OACE,qCACE,cAAC,IAAD,CAAQmR,GAAI,CAAE0M,WAAW,EAAOC,OAAO,GAASC,KAAK,aAAaC,IAAK,CAAC,EAAG,KAAMrF,MAAO,CAAEiB,WAAW,GAAD,OAAKgE,IAAzG,SACE,eAAC,WAAD,CAAU5V,SAAU,KAApB,UACE,cAAC6L,GAAD,IACA,cAAC5I,EAAD,IACA,kCACE9E,IAAKnG,EACL8F,UAAW,EACX/B,SAAU,CAAC,EAAGF,KAAKC,GAAI,KAEzB,8BAAcgC,UAAW,KACzB,cAACiC,EAAD,UACG/H,EAAiB0D,SAAW,2BAAWua,OAAQje,EAAiB0D,QAAQ+O,WAE3E,cAACvF,EAAD,IACA,cAAC,EAAD,IACA,cAAC6D,GAAD,IACA,cAAC,EAAD,CAAQmN,YAAaN,IACrB,cAACrK,GAAD,IACA,cAACvC,GAAD,IACA,cAAC8C,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAACqK,EAAA,EAAD,CAASC,KAAG,SAGhB,cAAC1C,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,OC7CN2C,IAASC,WAAWC,SAASC,eAAe,SAAS7M,OACnD,cAAC,IAAM8M,WAAP,UACE,cAACd,GAAD,CAAWC,QAAQ,iB","file":"static/js/main.94000da8.chunk.js","sourcesContent":["import { Color } from 'three'\nimport { createRef } from 'react'\nimport create from 'zustand'\n\nconst useStore = create((set, get) => {\n\n  return {\n    set,\n    get,\n    score: 0,\n    level: 0,\n    gameOver: false,\n    gameStarted: false,\n    musicEnabled: JSON.parse(localStorage.getItem('musicEnabled')) ?? false,\n    isSpeedingUp: false,\n    controls: {\n      left: false,\n      right: false,\n    },\n    directionalLight: createRef(),\n    camera: createRef(),\n    ship: createRef(),\n    sun: createRef(),\n    sfx: createRef(),\n    hasInteracted: false,\n    setHasInteracted: () => set(state => ({ hasInteracted: true })),\n    setIsSpeedingUp: (speedingUp) => set(state => ({ isSpeedingUp: speedingUp })),\n    incrementLevel: () => set(state => ({ level: state.level + 1 })),\n    setScore: (score) => set(state => ({ score: score })),\n    setGameStarted: (started) => set(state => ({ gameStarted: started })),\n    setGameOver: (over) => set(state => ({ gameOver: over })),\n    enableMusic: (enabled) => set(state => ({ musicEnabled: enabled }))\n  }\n})\n\nconst mutation = {\n  gameOver: false,\n  score: 0,\n  gameSpeed: 0.0,\n  desiredSpeed: 0.0,\n  horizontalVelocity: 0,\n  colorLevel: 0,\n  shouldShiftItems: false,\n  currentMusicLevel: 0,\n  currentLevelLength: 0,\n  globalColor: new Color()\n}\n\nexport { useStore, mutation }","export default __webpack_public_path__ + \"static/media/spaceship.e86972b1.gltf\";","export default __webpack_public_path__ + \"static/media/noise.2793ebd0.png\";","export default __webpack_public_path__ + \"static/media/enginetextureflip.d0f77b17.png\";","import React, { useRef, useLayoutEffect, useEffect, Suspense, useState } from 'react'\nimport { useFrame, useThree } from '@react-three/fiber'\nimport { useGLTF, PerspectiveCamera, useTexture } from '@react-three/drei'\nimport { MirroredRepeatWrapping, Vector2, Vector3 } from 'three'\n\nimport shipModel from '../models/spaceship.gltf'\n\nimport noiseTexture from '../textures/noise.png'\nimport engineTexture from '../textures/enginetextureflip.png'\n\n\nimport { useStore, mutation } from '../state/useStore'\n\nconst v = new Vector3()\n\nfunction ShipModel(props, { children }) {\n  const { nodes, materials } = useGLTF(shipModel, \"https://www.gstatic.com/draco/versioned/decoders/1.4.0/\")\n  // tie ship and camera ref to store to allow getting at them elsewhere\n  const ship = useStore((s) => s.ship)\n  const camera = useStore((s) => s.camera)\n\n  const pointLight = useRef()\n\n  const innerConeExhaust = useRef()\n  const coneExhaust = useRef()\n  const outerConeExhaust = useRef()\n\n  const noise = useTexture(noiseTexture)\n  const exhaust = useTexture(engineTexture)\n\n  const leftWingTrail = useRef()\n  const rightWingTrail = useRef()\n\n  const bodyDetail = useRef()\n\n  const { clock } = useThree()\n\n  const gameStarted = useStore(s => s.gameStarted)\n  const gameOver = useStore(s => s.gameOver)\n\n  // subscribe to controller updates on mount\n  const controlsRef = useRef(useStore.getState().controls)\n  useEffect(() => useStore.subscribe(\n    controls => (controlsRef.current = controls),\n    state => state.controls\n  ), [])\n\n  useLayoutEffect(() => {\n    camera.current.rotation.set(0, Math.PI, 0)\n    camera.current.position.set(0, 4, -9) // 0, 1.5, -8\n    camera.current.lookAt(v.set(ship.current.position.x, ship.current.position.y, ship.current.position.z + 10)) // modify the camera tracking to look above the center of the ship\n\n    camera.current.rotation.z = Math.PI\n    ship.current.rotation.y = Math.PI\n  }, [ship, camera])\n\n  // turn off movement related parts when we arent moving\n  useLayoutEffect(() => {\n    if (!gameStarted || gameOver) {\n      innerConeExhaust.current.material.visible = false\n      coneExhaust.current.material.visible = false\n      outerConeExhaust.current.material.visible = false\n      leftWingTrail.current.material.visible = false\n      rightWingTrail.current.material.visible = false\n      pointLight.current.visible = false\n    } else {\n      innerConeExhaust.current.material.visible = true\n      coneExhaust.current.material.visible = true\n      outerConeExhaust.current.material.visible = true\n      leftWingTrail.current.material.visible = true\n      rightWingTrail.current.material.visible = true\n      pointLight.current.visible = true\n    }\n  }, [gameStarted, gameOver])\n\n  useLayoutEffect(() => {\n    noise.wrapS = noise.wrapT = MirroredRepeatWrapping\n    noise.repeat.set(1, 1)\n    noise.anisotropy = 16\n\n    exhaust.wrapS = exhaust.wrapT = MirroredRepeatWrapping\n    exhaust.repeat.set(1, 1)\n    exhaust.anisotropy = 16\n  }, [noise, exhaust])\n\n  const [innerLathe] = useState(() => {\n    const points = [\n      new Vector2(0.2, 0.8),\n      new Vector2(0.1, 0),\n      new Vector2(0.3, 1.5),\n      new Vector2(0.4, 1.9),\n      new Vector2(0.01, 7)]\n\n    return points\n  })\n\n  const [mediumLathe] = useState(() => {\n    const points = [\n      new Vector2(0.2, 0),\n      new Vector2(0.5, 2),\n      new Vector2(0.01, 8)]\n\n    return points\n  })\n\n  const [lathe] = useState(() => {\n    const points = [\n      new Vector2(0.01, 0),\n      new Vector2(0.3, 0.8),\n      new Vector2(0.4, 1.5),\n      new Vector2(0.5, 1.9),\n      new Vector2(0.01, 9)]\n\n    return points\n  })\n\n  const innerConeScaleFactor = useRef(0.7)\n\n  useFrame((state, delta) => {\n    const accelDelta = 1 * delta * 2 // 1.5\n\n    const time = clock.getElapsedTime()\n\n    const slowSine = Math.sin(time * 5)\n    const medSine = Math.sin(time * 10)\n    const fastSine = Math.sin(time * 15)\n\n    const { left, right } = controlsRef.current\n\n    rightWingTrail.current.scale.x = fastSine / 50\n    rightWingTrail.current.scale.y = medSine / 50\n    leftWingTrail.current.scale.x = fastSine / 50\n    leftWingTrail.current.scale.y = medSine / 50\n\n    // Forward Movement\n    ship.current.position.z -= mutation.gameSpeed * delta * 165\n\n\n    // Lateral Movement\n    if (mutation.gameOver) {\n      mutation.horizontalVelocity = 0\n    }\n    ship.current.position.x += mutation.horizontalVelocity * delta * 165\n\n    // Curving during turns\n    ship.current.rotation.z = mutation.horizontalVelocity * 1.5\n    ship.current.rotation.y = Math.PI - mutation.horizontalVelocity * 0.4\n    ship.current.rotation.x = -Math.abs(mutation.horizontalVelocity) / 10 // max/min velocity is -0.5/0.5, divide by ten to get our desired max rotation of 0.05\n\n    // Ship Jitter - small incidental movements\n    ship.current.position.y -= slowSine / 200\n    ship.current.rotation.x += slowSine / 100\n    ship.current.rotation.z += Math.sin(time * 4) / 100\n\n    // pointLight follow along \n    pointLight.current.position.z = ship.current.position.z + 1\n    pointLight.current.position.x = ship.current.position.x\n    pointLight.current.position.y -= slowSine / 80\n\n    // uncomment to unlock camera\n    camera.current.position.z = ship.current.position.z + 13.5 // + 13.5\n    camera.current.position.y = ship.current.position.y + 5 // 5\n    camera.current.position.x = ship.current.position.x\n\n    camera.current.rotation.y = Math.PI\n\n    if ((left && right) || (!left && !right)) {\n      if (mutation.horizontalVelocity < 0) {\n        if (mutation.horizontalVelocity + accelDelta > 0) {\n          mutation.horizontalVelocity = 0\n        } else {\n          mutation.horizontalVelocity += accelDelta\n        }\n      }\n\n      if (mutation.horizontalVelocity > 0) {\n        if (mutation.horizontalVelocity - accelDelta < 0) {\n          mutation.horizontalVelocity = 0\n        } else {\n          mutation.horizontalVelocity -= accelDelta\n        }\n      }\n    }\n\n    if (!mutation.gameOver && mutation.gameSpeed > 0) {\n      if ((left && !right)) {\n        mutation.horizontalVelocity = Math.max(-0.7 /* -0.5 */, mutation.horizontalVelocity - accelDelta)\n\n        // wing trail\n        rightWingTrail.current.scale.x = fastSine / 30\n        rightWingTrail.current.scale.y = slowSine / 30\n        leftWingTrail.current.scale.x = fastSine / 200\n        leftWingTrail.current.scale.y = slowSine / 200\n      }\n\n      if ((!left && right)) {\n        mutation.horizontalVelocity = Math.min(0.7 /* 0.7 */, mutation.horizontalVelocity + accelDelta)\n\n        // wing trail\n        leftWingTrail.current.scale.x = fastSine / 30\n        leftWingTrail.current.scale.y = slowSine / 30\n        rightWingTrail.current.scale.x = fastSine / 200\n        rightWingTrail.current.scale.y = slowSine / 200\n      }\n    }\n\n    pointLight.current.intensity = 20 - (fastSine / 15)\n\n    outerConeExhaust.current.material.map.offset.y += 0.01 * (0.4 + mutation.gameSpeed) * delta * 165\n    coneExhaust.current.material.map.offset.y -= 0.01 * (0.4 + mutation.gameSpeed) * delta * 165\n\n    if (mutation.desiredSpeed > mutation.gameSpeed) {\n      pointLight.current.intensity = 30 - (fastSine / 15)\n\n      if (innerConeScaleFactor.current < 0.95) {\n        if (innerConeScaleFactor.current + 0.005 * delta * 165 > 0.95) {\n          innerConeScaleFactor.current = 0.95\n        } else {\n          innerConeScaleFactor.current += 0.005 * delta * 165\n        }\n      }\n    } else {\n      if (innerConeScaleFactor.current > 0.7) {\n        if (innerConeScaleFactor.current - 0.005 * delta * 165 < 0.7) {\n          innerConeScaleFactor.current = 0.7\n        } else {\n          innerConeScaleFactor.current -= 0.005 * delta * 165\n        }\n      }\n    }\n\n\n    const scaleFactor = mutation.currentMusicLevel > 0.8 ? mutation.currentMusicLevel + 0.2 : 1\n\n    innerConeExhaust.current.scale.z = (fastSine / 15)\n    innerConeExhaust.current.scale.x = (innerConeScaleFactor.current + fastSine / 15) * scaleFactor\n    coneExhaust.current.scale.z = (fastSine / 15)\n    coneExhaust.current.scale.x = (0.85 + fastSine / 15) * scaleFactor\n    outerConeExhaust.current.scale.z = (0.9 + fastSine / 15)\n    outerConeExhaust.current.scale.x = (0.9 + fastSine / 15) * scaleFactor\n\n    bodyDetail.current.material.color = mutation.globalColor\n  })\n\n  return (\n    <>\n      <pointLight ref={pointLight} color=\"tomato\" decay={10} distance={40} intensity={5} position={[0, 3, -5]} />\n      <PerspectiveCamera makeDefault ref={camera} fov={75} rotation={[0, Math.PI, 0]} position={[0, 10, -10]} />\n      <group castShadow receiveShadow ref={ship} position={[0, 3, -10]} {...props} dispose={null}>\n        {children}\n        <mesh geometry={nodes.Ship_Body.geometry}>\n          <meshStandardMaterial attach=\"material\" color=\"lightblue\" metalness={0.8} reflectivity={1} clearcoat={1} roughness={0} />\n        </mesh>\n        <mesh receiveShadow castShadow geometry={nodes.Ship_Body_1.geometry} material={materials.Chassis} />\n        <mesh geometry={nodes.Ship_Body_2.geometry}>\n          <meshBasicMaterial attach=\"material\" color=\"orange\" />\n        </mesh>\n        <mesh receiveShadow castShadow geometry={nodes.Ship_Body_3.geometry} material={materials['Gray Metal']} />\n        <mesh ref={bodyDetail} geometry={nodes.Ship_Body_4.geometry}>\n          <meshLambertMaterial attach=\"material\" color=\"white\" />\n        </mesh>\n        <mesh ref={leftWingTrail} scale={[0.1, 0.05, 2]} position={[1.4, 0.2, -7]}>\n          <dodecahedronBufferGeometry args={[1.5, 3]} />\n          <meshBasicMaterial transparent opacity={0.8} color=\"white\" />\n        </mesh>\n        <mesh ref={rightWingTrail} scale={[0.1, 0.05, 2]} position={[-1.4, 0.2, -7]}>\n          <dodecahedronBufferGeometry args={[1.5, 3]} />\n          <meshBasicMaterial transparent opacity={0.8} color=\"white\" />\n        </mesh>\n        <mesh visible={true} ref={innerConeExhaust} position={[0, -0.3, 0.3]} rotation={[Math.PI / 2, 0, Math.PI]}>\n          <latheBufferGeometry args={[innerLathe, 20]} />\n          <meshLambertMaterial transparent opacity={1} color=\"white\" />\n        </mesh>\n        <mesh visible={true} ref={coneExhaust} position={[0, -0.3, 0.25]} rotation={[Math.PI / 2, 0, Math.PI]}>\n          <latheBufferGeometry args={[mediumLathe, 30]} />\n          <meshLambertMaterial transparent opacity={0.8} map={noise} color={0xAAAAAA} emissive=\"red\" emissiveIntensity={1} />\n        </mesh>\n        <mesh visible={true} ref={outerConeExhaust} position={[0, -0.3, 0]} rotation={[Math.PI / 2, 0, Math.PI]}>\n          <latheBufferGeometry args={[lathe, 50]} />\n          <meshLambertMaterial transparent alphaMap={exhaust} map={exhaust} color=\"hotpink\" />\n        </mesh>\n      </group>\n    </>\n  )\n}\n\n\nuseGLTF.preload(shipModel, \"https://www.gstatic.com/draco/versioned/decoders/1.4.0/\")\n\nfunction Loading() {\n  return (\n    <mesh visible position={[0, 0.87, 0]} rotation={[0, 0, 0]}>\n      <sphereGeometry attach=\"geometry\" args={[1, 16, 16]} />\n      <meshStandardMaterial\n        attach=\"material\"\n        color=\"black\"\n        transparent\n        opacity={1}\n        roughness={1}\n        metalness={0}\n      />\n    </mesh>\n  )\n}\n\n\nexport default function Ship({ children }) {\n\n  return (\n    <Suspense fallback={<Loading />}>\n      <ShipModel>\n        {children}\n      </ShipModel>\n    </Suspense>\n  )\n}","import * as THREE from 'three'\n\n/**\n * The size of each ground plane in meters, 1000 is fine\n */\nexport const PLANE_SIZE = 1000\n\n/**\n * How many ground planes must we traverse per level, default 6\n */\nexport const LEVEL_SIZE = 6\n\nexport const LEFT_BOUND = (-PLANE_SIZE / 2) * 0.6\nexport const RIGHT_BOUND = (PLANE_SIZE / 2) * 0.6\n\nexport const CUBE_SIZE = 20\n\nexport const CUBE_AMOUNT = 60\n\nexport const INITIAL_GAME_SPEED = 0.8\n\nexport const GAME_SPEED_MULTIPLIER = 0.2\n\nexport const WALL_RADIUS = 40\n\nexport const COLORS = [\n  {\n    name: 'pink',\n    hex: '#ff69b4',\n    three: new THREE.Color(0xff2190)\n  },\n  {\n    name: 'red',\n    hex: '#ff2919',\n    three: new THREE.Color(0xff2919) //  0xff3021 #ff1e0d\n  },\n  {\n    name: 'orange',\n    hex: '#bd4902',\n    three: new THREE.Color(0xbd4902) //0xcc4e00\n  },\n  {\n    name: 'green',\n    hex: '#26a300',\n    three: new THREE.Color(0x26a300) // 0x2ec200\n  },\n  {\n    name: 'blue',\n    hex: '#217aff',\n    three: new THREE.Color(0x2069d6)\n  },\n  {\n    name: 'purple',\n    hex: '#9370D8',\n    three: new THREE.Color(0x6942b8)\n  },\n  {\n    name: 'white',\n    hex: '#ffffff',\n    three: new THREE.Color(0x6b6b6b) // 0x828282\n  },\n  {\n    name: 'black',\n    hex: '#000000',\n    three: new THREE.Color(0xCCCCCC)\n  }\n]\n","export default __webpack_public_path__ + \"static/media/grid-rainbow.1dc05ea5.png\";","import { Color, RepeatWrapping } from 'three'\nimport React, { useRef, Suspense, useLayoutEffect } from 'react'\nimport { useFrame } from '@react-three/fiber'\nimport { useTexture } from '@react-three/drei'\nimport { useStore, mutation } from '../state/useStore'\n\nimport { PLANE_SIZE, GAME_SPEED_MULTIPLIER } from '../constants'\n\nimport gridRed from '../textures/grid-red.png'\nimport gridOrange from '../textures/grid-orange.png'\nimport gridGreen from '../textures/grid-green.png'\nimport gridBlue from '../textures/grid-blue.png'\nimport gridPurple from '../textures/grid-purple.png'\nimport gridPink from '../textures/grid-pink.png'\nimport gridRainbow from '../textures/grid-rainbow.png'\n\nconst TEXTURE_SIZE = PLANE_SIZE * 0.05 // 0.075\nconst MOVE_DISTANCE = PLANE_SIZE * 2\n\nconst color = new Color(0x000000)\n\nfunction Ground() {\n  const ground = useRef()\n  const groundTwo = useRef()\n\n  const plane = useRef()\n  const planeTwo = useRef()\n\n  const textures = useTexture([gridPink, gridRed, gridOrange, gridGreen, gridBlue, gridPurple, gridRainbow])\n\n  const ship = useStore(s => s.ship)\n  const incrementLevel = useStore(s => s.incrementLevel)\n\n  useLayoutEffect(() => {\n    textures.forEach(texture => {\n      texture.wrapS = texture.wrapT = RepeatWrapping\n      texture.repeat.set(TEXTURE_SIZE, TEXTURE_SIZE)\n      texture.anisotropy = 16\n    })\n  }, [textures])\n\n  const moveCounter = useRef(1)\n  const lastMove = useRef(0)\n\n  useFrame((state, delta) => {\n\n    if (ship.current) {\n      // Alternates moving the two ground planes when we've just passed over onto a new plane, with logic to make sure it only happens once per pass\n      // Checks if weve moved 10 meters into the new plane (-10) (so the old plane is no longer visible)\n      if (Math.round(ship.current.position.z) + PLANE_SIZE * moveCounter.current + 10 < -10) {\n\n        // Ensures we only move the plane once per pass\n        if (moveCounter.current === 1 || Math.abs(ship.current.position.z) - Math.abs(lastMove.current) <= 10) {\n\n          // change the level every 4 moves or 4000 meters\n          if (moveCounter.current % 6 === 0) {\n            incrementLevel()\n            mutation.colorLevel++\n            mutation.desiredSpeed += GAME_SPEED_MULTIPLIER\n\n            if (mutation.colorLevel >= textures.length) {\n              mutation.colorLevel = 0\n            }\n          }\n\n          if (moveCounter.current % 2 === 0) {\n            groundTwo.current.position.z -= MOVE_DISTANCE\n            lastMove.current = groundTwo.current.position.z\n            planeTwo.current.material.map = textures[mutation.colorLevel]\n          } else {\n            ground.current.position.z -= MOVE_DISTANCE\n            lastMove.current = ground.current.position.z\n            plane.current.material.map = textures[mutation.colorLevel]\n          }\n        }\n\n        moveCounter.current++\n      }\n    }\n\n\n    // handles changing ground color between levels (really interpolating the emissiveness and changing the emissive map around)\n    if (mutation.colorLevel > 0) {\n      if (plane.current.material.map.uuid !== planeTwo.current.material.map.uuid) {\n        if (plane.current.material.emissiveIntensity < 1) {\n          if (plane.current.material.emissiveIntensity + delta * mutation.gameSpeed > 1) {\n            plane.current.material.emissiveIntensity = 1\n          } else {\n            plane.current.material.emissiveIntensity += delta * mutation.gameSpeed\n          }\n        } else {\n          plane.current.material.map = textures[mutation.colorLevel]\n          if (mutation.colorLevel === textures.length - 1) {\n            plane.current.material.emissiveMap = textures[0]\n          } else {\n            plane.current.material.emissiveMap = textures[mutation.colorLevel + 1]\n          }\n          plane.current.material.emissiveIntensity = 0\n        }\n      }\n    }\n  })\n\n\n  return (\n    <>\n      <group ref={ground} position={[0, 0, -(PLANE_SIZE / 2)]}>\n        <mesh\n          ref={plane}\n          receiveShadow\n          visible\n          rotation={[-Math.PI / 2, 0, 0]}\n        >\n          <planeBufferGeometry attach=\"geometry\" args={[PLANE_SIZE, PLANE_SIZE, 1, 1]} />\n          <meshStandardMaterial\n            receiveShadow\n            color={color.set(0xFFFFFF)}\n            emissiveMap={textures[1]}\n            emissive={color.set(0xFFFFFF)}\n            emissiveIntensity={0}\n            attach=\"material\"\n            map={textures[0]}\n            roughness={1}\n            metalness={0}\n          />\n        </mesh>\n      </group>\n      <group ref={groundTwo} position={[0, 0, -PLANE_SIZE - (PLANE_SIZE / 2)]}>\n        <mesh\n          ref={planeTwo}\n          receiveShadow\n          visible\n          rotation={[-Math.PI / 2, 0, 0]}\n        >\n          <planeBufferGeometry attach=\"geometry\" args={[PLANE_SIZE, PLANE_SIZE, 1, 1]} />\n          <meshStandardMaterial\n            receiveShadow\n            emissiveMap={textures[1]}\n            attach=\"material\"\n            map={textures[0]}\n            roughness={1}\n            metalness={0}\n          />\n        </mesh>\n      </group>\n    </>\n  )\n}\n\nfunction LoadingGround() {\n  return (\n    <mesh\n      receiveShadow\n      visible\n      position={[0, 0, 0]}\n      rotation={[-Math.PI / 2, 0, 0]}\n    >\n      <planeBufferGeometry attach=\"geometry\" args={[5000, 5000, 1, 1]} />\n      <meshStandardMaterial\n        receiveShadow\n        attach=\"material\"\n        color={`black`}\n        roughness={1}\n        metalness={0}\n      />\n    </mesh>\n  )\n}\n\nexport default function CompleteGround() {\n\n  return (\n    <Suspense fallback={<LoadingGround />}>\n      <Ground />\n    </Suspense>\n  )\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIeUlEQVR4nO3YQRHCUAxAwZTBQtGIJLRUEoj4PbcSeLsOMsnhTbY1xxoAIOVh3QDQIwAAIEgAAEDQ8z7y/nq7AwD4M7/v5zKQDwAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEHbmmNZPAC0+AAAQJAAAIAgAQAANTNzAvUJDHH6EJ8/AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIeElEQVR4nO3YwQ3CQAwAQQdRAIoE/dcHHzq4vJMSsjMdWPZj5W3NvgYASHlYNwD0CAAACBIAABD0vI78/rzcAQDczO/7Pw3kAwAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQNC2Zl8WDwAtPgAAECQAACBIAABAzcwcUmILIagULToAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAImElEQVR4nO3ZOxHCABBAwfCpaKhwgYPYQAACsYEDXECDgAwMJQQFebsObu6KN3Orx3n3GgCAlLV1A0CPAACAIAEAAEHb35Fvz407AICFOe6nr4FmAfBxuh7sHQAW4jLeZ4N4AQBAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAARt/418Ge9uAQAWbBYAx/1k3wCwcF4AABAkAAAgSAAAQM0wDG+Iiw9nih8WdgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIe0lEQVR4nO3YsRHCQAwAQZmhB3JHFOH+ayAip4p3bJfA7XagkYIbbceaNQBAysO6AaBHAABAkAAAgKDnfeTPa3cHAPBn3r/vZSAfAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAgrZjzbJ4AGjxAQCAIAEAAEECAABqZuYEolQLdZ08W5wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIe0lEQVR4nO3YQRHCUAxAwZRBAg5qCBXVhyEc4OH33Erg7TrIJIc32eZYawCAlId1A0CPAACAIAEAAEHP+8ivz+4OAODP/N7fy0A+AAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABG1zrGXxANDiAwAAQQIAAIIEAADUzMwJEMkLySo4B1wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIl0lEQVR4nO3ZMQ3CABBA0ZaggJEdLxhhBiuEESNIacLOiAUIIxQF/e85uNwNP7nxcppeAwCQsrJuAOgRAAAQJAAAIGj9O/L1dnQHALAwh/35a6BZAHw8nnd7B4CF2G52s0G8AAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAILW/0bebnZuAQAWbLycppcFA0CLFwAABAkAAAgSAABQMwzDG5D4EAqkVqISAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/galaxy.ef4e164b.jpg\";","import { Suspense, useRef, useMemo, useLayoutEffect } from 'react'\nimport { useThree, useFrame } from '@react-three/fiber'\nimport { useTexture, Stars } from '@react-three/drei'\nimport { Color, BackSide, MirroredRepeatWrapping } from 'three'\n\nimport galaxyTexture from '../textures/galaxy.jpg'\n\nimport { mutation, useStore } from '../state/useStore'\n\nimport { COLORS } from '../constants'\n\nfunction Sun() {\n  const { clock } = useThree()\n\n  const sun = useStore((s) => s.sun)\n  const ship = useStore((s) => s.ship)\n\n  const sunColor = useMemo(() => new Color(1, 0.694, 0.168), [])\n\n  useFrame((state, delta) => {\n    if (ship.current) {\n      sun.current.position.z = ship.current.position.z - 2000\n      sun.current.position.x = ship.current.position.x\n    }\n\n    const scaleFactor = mutation.currentMusicLevel\n\n    sun.current.scale.x += Math.sin(clock.getElapsedTime() * 3) / 3000\n    sun.current.scale.y += Math.sin(clock.getElapsedTime() * 3) / 3000\n\n    if (scaleFactor >= 0.8 && sun.current.scale.x < 1.05) {\n      sun.current.scale.x += scaleFactor * delta * 2\n      sun.current.scale.y += scaleFactor * delta * 2\n    } else if (sun.current.scale.x > 1) {\n      sun.current.scale.x -= scaleFactor * delta * 0.5\n      sun.current.scale.y -= scaleFactor * delta * 0.5\n    }\n  })\n\n  return (\n    <mesh ref={sun} position={[0, 0, -2000]}>\n      <sphereGeometry attach=\"geometry\" args={[300, 30, 30]} />\n      <meshStandardMaterial fog={false} emissive={sunColor} emissiveIntensity={1} attach=\"material\" color={COLORS[1].three} />\n    </mesh>\n  )\n}\n\nfunction Sky() {\n  const texture = useTexture(galaxyTexture)\n  const sky = useRef()\n  const stars = useRef()\n\n  const ship = useStore((s) => s.ship)\n\n  useLayoutEffect(() => {\n    texture.wrapS = texture.wrapT = MirroredRepeatWrapping\n    texture.repeat.set(1.8, 1.8)\n    texture.anisotropy = 16\n  }, [texture])\n\n\n  useFrame((state, delta) => {\n    sky.current.rotation.z += delta * 0.02 * mutation.gameSpeed\n    stars.current.rotation.z += delta * 0.02 * mutation.gameSpeed\n    sky.current.emissive = mutation.globalColor\n\n    if (ship.current) {\n      sky.current.position.x = ship.current.position.x\n      stars.current.position.x = ship.current.position.x\n      sky.current.position.z = ship.current.position.z\n      stars.current.position.z = ship.current.position.z\n    }\n  })\n\n\n  return (\n    <>\n      <Stars ref={stars} radius={800} depth={100} count={10000} factor={40} saturation={1} fade />\n      <mesh ref={sky} position={[0, 10, -50]} rotation={[0, 0, Math.PI]}>\n        <hemisphereLight intensity={0.7} />\n        <sphereGeometry attach=\"geometry\" args={[2000, 10, 10]} />\n        <meshPhongMaterial emissive={COLORS[0].three} emissiveIntensity={0.1} fog={false} side={BackSide} attach=\"material\" map={texture} />\n      </mesh>\n    </>\n  )\n}\n\nfunction Fog() {\n  const fog = useRef()\n\n  useFrame((state, delta) => {\n    fog.current.near = 100\n    fog.current.far = 800\n    fog.current.color = mutation.globalColor\n  })\n\n  return (\n    <fog ref={fog} attach=\"fog\" args={['#bf6c00', 600, 800]} />\n  )\n}\n\n\nexport default function Skybox() {\n\n  return (\n    <Suspense fallback={null}>\n      <Sun />\n      <Sky />\n      <Fog />\n    </Suspense>\n  )\n}","const randomInRange = (from, to) => Math.floor(Math.random() * (to - from + 1)) - to\n\nexport default randomInRange","export default function distance2D(p1x, p1y, p2x, p2y) {\n  const a = p2x - p1x;\n  const b = p2y - p1y;\n\n  return Math.sqrt(a * a + b * b);\n}","import { Object3D } from 'three'\nimport { useRef, useMemo } from 'react'\nimport { useFrame } from '@react-three/fiber'\n\nimport { CUBE_AMOUNT, CUBE_SIZE, PLANE_SIZE, COLORS, WALL_RADIUS, LEVEL_SIZE, LEFT_BOUND, RIGHT_BOUND } from '../constants'\nimport { useStore, mutation } from '../state/useStore'\n\nimport randomInRange from '../util/randomInRange'\nimport distance2D from '../util/distance2D'\n\nconst negativeBound = LEFT_BOUND + WALL_RADIUS / 2\nconst positiveBound = RIGHT_BOUND - WALL_RADIUS / 2\n\nexport default function InstancedCubes() {\n  const mesh = useRef()\n  const material = useRef()\n\n  const ship = useStore(s => s.ship)\n  const level = useStore(s => s.level)\n\n  const dummy = useMemo(() => new Object3D(), [])\n  const cubes = useMemo(() => {\n    // Setup initial cube positions\n    const temp = []\n    for (let i = 0; i < CUBE_AMOUNT; i++) {\n      const x = randomInRange(negativeBound, positiveBound)\n      const y = 10\n      const z = -900 + randomInRange(-400, 400)\n\n      temp.push({ x, y, z })\n    }\n    return temp\n  }, [])\n\n  const diamondStart = useMemo(() => -(level * PLANE_SIZE * LEVEL_SIZE) - PLANE_SIZE * (LEVEL_SIZE - 2.6), [level])\n  const diamondEnd = useMemo(() => -(level * PLANE_SIZE * LEVEL_SIZE) - PLANE_SIZE * (LEVEL_SIZE), [level])\n\n  useFrame((state, delta) => {\n    let isOutsideDiamond = false\n    if (ship.current) {\n      if (ship.current.position.z > diamondStart || ship.current.position.z < diamondEnd) {\n        isOutsideDiamond = true\n      }\n    }\n\n    cubes.forEach((cube, i) => {\n      if (ship.current) {\n        if (cube.z - ship.current.position.z > -15) { // No need to run the rather expensive distance function if the ship is too far away\n          if (cube.x - ship.current.position.x > -15 || cube.x - ship.current.position.x < 15) {\n            const distanceToShip = distance2D(ship.current.position.x, ship.current.position.z, cube.x, cube.z)\n\n            if (distanceToShip < 12) {\n              mutation.gameSpeed = 0\n              mutation.gameOver = true\n            }\n          }\n        }\n\n        if (cube.z - ship.current.position.z > 15) {\n          if (isOutsideDiamond) {\n            cube.z = ship.current.position.z - PLANE_SIZE + randomInRange(-200, 0)\n            cube.y = -CUBE_SIZE\n            cube.x = randomInRange(negativeBound, positiveBound)\n          } else {\n            cube.z = ship.current.position.z - (PLANE_SIZE * 3.1) + randomInRange(-200, 0)\n            cube.y = -CUBE_SIZE\n            cube.x = randomInRange(negativeBound, positiveBound)\n          }\n        }\n\n        if (cube.y < CUBE_SIZE / 2) {\n          if (cube.y + delta * 100 > CUBE_SIZE / 2) {\n            cube.y = CUBE_SIZE / 2\n          } else {\n            cube.y += delta * 100\n          }\n        }\n      }\n\n      material.current.color = mutation.globalColor\n\n      dummy.position.set(\n        cube.x,\n        cube.y,\n        cube.z\n      )\n\n      // apply changes to dummy and to the instanced matrix\n      dummy.updateMatrix()\n      mesh.current.setMatrixAt(i, dummy.matrix)\n    })\n\n    // Tells THREE to draw the updated matrix, I guess?\n    mesh.current.instanceMatrix.needsUpdate = true\n  })\n\n  return (\n    <instancedMesh ref={mesh} args={[null, null, CUBE_AMOUNT]}>\n      <boxBufferGeometry args={[CUBE_SIZE, CUBE_SIZE, CUBE_SIZE]} />\n      <meshBasicMaterial ref={material} color={COLORS[0].three} />\n    </instancedMesh>\n  )\n}","import { Cone } from '@react-three/drei'\nimport { useFrame } from '@react-three/fiber'\nimport { useRef } from 'react'\n\nimport { useStore, mutation } from '../state/useStore'\nimport { PLANE_SIZE, WALL_RADIUS, COLORS, LEFT_BOUND, RIGHT_BOUND } from '../constants'\n\nexport default function Walls() {\n  const ship = useStore((s) => s.ship)\n\n  const rightWall = useRef()\n  const leftWall = useRef()\n\n  useFrame((state, delta) => {\n    if (ship.current) {\n      rightWall.current.position.z = ship.current.position.z\n      leftWall.current.position.z = ship.current.position.z\n\n      if (ship.current.position.x <= LEFT_BOUND + (WALL_RADIUS / 2) || ship.current.position.x >= RIGHT_BOUND - (WALL_RADIUS / 2)) {\n        mutation.gameSpeed = 0\n        mutation.gameOver = true\n      }\n    }\n\n    leftWall.current.material.color = mutation.globalColor\n    rightWall.current.material.color = mutation.globalColor\n  })\n\n  return (\n    <>\n      <Cone args={[WALL_RADIUS, PLANE_SIZE * 2, 8]} position={[LEFT_BOUND, 0, -5]} rotation={[Math.PI / 2, 0, Math.PI]} ref={leftWall}>\n        <meshBasicMaterial attach=\"material\" color={COLORS[0].three} />\n      </Cone>\n      <Cone args={[WALL_RADIUS, PLANE_SIZE * 2, 8]} position={[RIGHT_BOUND, 0, -5]} rotation={[Math.PI / 2, 0, Math.PI]} ref={rightWall}>\n        <meshBasicMaterial attach=\"material\" color={COLORS[0].three} />\n      </Cone>\n    </>\n  )\n}","import { PLANE_SIZE, CUBE_SIZE, WALL_RADIUS, LEFT_BOUND } from '../constants/index'\n\nconst segments = (PLANE_SIZE - WALL_RADIUS / 2) / CUBE_SIZE\nconst negativeBound = -(PLANE_SIZE / 2) + WALL_RADIUS / 2\n\nexport function makeWall(hasGap = true, gapSize = 3) {\n  const wallCoordinates = [...Array(segments)].map((cube, index) => {\n    return {\n      x: negativeBound + index * CUBE_SIZE, // -500, -480, -460, etc\n      y: CUBE_SIZE / 2,\n      z: index <= segments / 2 ? -(index * CUBE_SIZE) : -(segments * CUBE_SIZE) + index * CUBE_SIZE, // pyramid formation\n    }\n  })\n\n  if (hasGap) {\n    wallCoordinates.splice(segments / 2 - Math.floor(gapSize / 2), gapSize) // TODO: rethink this math when not tired\n  }\n\n  if (LEFT_BOUND < PLANE_SIZE / 2) {\n    const spliceFactor = (PLANE_SIZE / 2 + LEFT_BOUND) / CUBE_SIZE - 1\n    wallCoordinates.splice(0, spliceFactor)\n    wallCoordinates.splice(-spliceFactor, spliceFactor)\n  }\n\n  return wallCoordinates\n}\n\nfunction makeTunnel(tunnelLength = 10, gapSize = 3) {\n\n  // const tunnelCoordinates = [...Array(tunnelLength * 2)].map((cube, index) => {\n  //   return {\n  //     x: index % 2 === 0 ? CUBE_SIZE * 2 : -CUBE_SIZE * 2,\n  //     y: CUBE_SIZE / 2,\n  //     z: -(((segments / 2 - 2) * CUBE_SIZE) + (index * CUBE_SIZE * 0.7))\n  //   }\n  // })\n\n  const coords = [\n    { x: 40, y: 10, z: -450 },\n    { x: -40, y: 10, z: -450 },\n    { x: 40, y: 10, z: -478 },\n    { x: -40, y: 10, z: -478 },\n    { x: 40, y: 10, z: -506 },\n    { x: -40, y: 10, z: -506 },\n    { x: 40, y: 10, z: -534 },\n    { x: -40, y: 10, z: -534 },\n    { x: 40, y: 10, z: -562 },\n    { x: -40, y: 10, z: -562 },\n    { x: 40, y: 10, z: -590 },\n    { x: -40, y: 10, z: -590 },\n    { x: 40, y: 10, z: -618 },\n    { x: -40, y: 10, z: -618 },\n    { x: 40, y: 10, z: -646 },\n    { x: -40, y: 10, z: -646 },\n    { x: 40, y: 10, z: -674 },\n    { x: -40, y: 10, z: -674 },\n    { x: 40, y: 10, z: -702 },\n    { x: -40, y: 10, z: -702 }]\n\n  return coords\n}\n\nfunction makeDiamond(size = 21, tunnelLength = 10) {\n  const wallEndOffset = -((segments / 2 - 2) * CUBE_SIZE)\n  const tunnelEndOffset = tunnelLength * CUBE_SIZE * 0.7\n\n  const outerLeftWall = [...Array(size)].map((cube, index) => {\n    return {\n      x: index === 0 ? -70 : index <= size / 2 ? -CUBE_SIZE * 3 - index * CUBE_SIZE : (-CUBE_SIZE * 3 - size * CUBE_SIZE) + index * CUBE_SIZE,\n      y: CUBE_SIZE / 2,\n      z: wallEndOffset - tunnelEndOffset - index * CUBE_SIZE * 1.75\n    }\n  })\n\n  const outerRightWall = [...Array(size)].map((cube, index) => {\n    return {\n      x: index === 0 ? 70 : index <= size / 2 ? CUBE_SIZE * 3 + index * CUBE_SIZE : (CUBE_SIZE * 3 + size * CUBE_SIZE) - index * CUBE_SIZE,\n      y: CUBE_SIZE / 2,\n      z: wallEndOffset - tunnelEndOffset - index * CUBE_SIZE * 1.75\n    }\n  })\n\n  const innerSize = Math.floor(size / 2) - 2 // TODO: maybe remove -2\n\n  const innerLeftWall = [...Array(innerSize)].map((cube, index) => {\n    return {\n      x: index === 1 ? (-CUBE_SIZE / 2) - index * CUBE_SIZE * 1.1 : index < innerSize / 2 ? (-CUBE_SIZE / 2) - index * CUBE_SIZE : (-CUBE_SIZE / 2) - (innerSize * CUBE_SIZE) + index * CUBE_SIZE,\n      y: CUBE_SIZE / 2,\n      z: wallEndOffset - tunnelEndOffset - (Math.floor(size / 1.5) * CUBE_SIZE) - index * CUBE_SIZE * 1.75\n    }\n  })\n\n  const innerRightWall = [...Array(innerSize)].map((cube, index) => {\n    return {\n      x: index === 1 ? (CUBE_SIZE / 2) + index * CUBE_SIZE * 1.1 : index < innerSize / 2 ? (CUBE_SIZE / 2) + index * CUBE_SIZE : (CUBE_SIZE / 2) + (innerSize * CUBE_SIZE) - index * CUBE_SIZE,\n      y: CUBE_SIZE / 2,\n      z: wallEndOffset - tunnelEndOffset - (Math.floor(size / 1.5) * CUBE_SIZE) - index * CUBE_SIZE * 1.75\n    }\n  })\n\n  const middlePiece = { x: 0, y: CUBE_SIZE / 2, z: wallEndOffset - tunnelEndOffset - (Math.floor(size / 1.5) * CUBE_SIZE) + CUBE_SIZE }\n\n  const firstDiamond = [...outerLeftWall, ...outerRightWall, middlePiece, ...innerLeftWall, ...innerRightWall]\n  const secondDiamond = firstDiamond.map((coordinates, index) => ({ ...coordinates, z: index >= 42 ? coordinates.z - 700 /* 735 */ : coordinates.z - (size * CUBE_SIZE * 1.75) }))\n\n  const finalTunnel = [\n    { x: 60, y: 10, z: -2045 },\n    { x: -60, y: 10, z: -2045 },\n    { x: 40, y: 10, z: -2065 },\n    { x: -40, y: 10, z: -2065 },\n    { x: 40, y: 10, z: -2085 },\n    { x: -40, y: 10, z: -2085 },\n    { x: 40, y: 10, z: -2105 },\n    { x: -40, y: 10, z: -2105 },\n    { x: 40, y: 10, z: -2125 },\n    { x: -40, y: 10, z: -2125 },\n    { x: 40, y: 10, z: -2145 },\n    { x: -40, y: 10, z: -2145 },\n    { x: 40, y: 10, z: -2165 },\n    { x: -40, y: 10, z: -2165 },\n    { x: 40, y: 10, z: -2185 },\n    { x: -40, y: 10, z: -2185 },\n    { x: 40, y: 10, z: -2205 },\n    { x: -40, y: 10, z: -2205 },\n    { x: 40, y: 10, z: -2225 },\n    { x: -40, y: 10, z: -2225 },\n    { x: 40, y: 10, z: -2245 },\n    { x: -40, y: 10, z: -2245 },\n    { x: 40, y: 10, z: -2265 },\n    { x: -40, y: 10, z: -2265 },\n  ]\n\n  return [...firstDiamond, ...secondDiamond, ...finalTunnel]\n}\n\nexport function generateDiamond() {\n  const initialWall = makeWall()\n  const tunnel = makeTunnel()\n  const diamond = makeDiamond()\n\n  return [...initialWall, ...tunnel, ...diamond]\n}\n\nexport function generateCubeTunnel() {\n  const initialWall = makeWall()\n  const tunnel = makeTunnel()\n\n  return [...initialWall, ...tunnel]\n}","import { Object3D } from 'three'\nimport { useRef, useMemo } from 'react'\nimport { useFrame } from '@react-three/fiber'\n\nimport { PLANE_SIZE, COLORS, LEVEL_SIZE } from '../constants'\nimport { useStore, mutation } from '../state/useStore'\n\nimport distance2D from '../util/distance2D'\nimport { generateCubeTunnel, generateDiamond } from '../util/generateFixedCubes'\n\n\nexport default function InstancedCubes() {\n  const mesh = useRef()\n  const material = useRef()\n\n  const ship = useStore(s => s.ship)\n  const level = useStore(s => s.level)\n\n  const tunnelCoords = useMemo(() => generateCubeTunnel(), [])\n  const diamondCoords = useMemo(() => generateDiamond(), [])\n\n  const dummy = useMemo(() => new Object3D(), [])\n  const cubes = useMemo(() => {\n    // Setup initial cube positions\n    const temp = []\n    for (let i = 0; i < diamondCoords.length; i++) {\n      const x = tunnelCoords[i]?.x || 0\n      const y = 0\n      const z = 300 + tunnelCoords[i]?.z || 10\n\n      temp.push({ x, y, z })\n    }\n    return temp\n  }, [diamondCoords, tunnelCoords])\n\n  const currentLevelMinusDiamondStart = useMemo(() => -(level * PLANE_SIZE * LEVEL_SIZE) - PLANE_SIZE * (LEVEL_SIZE - 2), [level])\n\n  useFrame((state, delta) => {\n    cubes.forEach((cube, i) => {\n      if (ship.current) {\n        if (cube.z - ship.current.position.z > -15) {\n          if (cube.x - ship.current.position.x > -15 || cube.x - ship.current.position.x < 15) {\n            const distanceToShip = distance2D(ship.current.position.x, ship.current.position.z, cube.x, cube.z)\n\n            if (distanceToShip < 12) {\n              mutation.gameSpeed = 0\n              mutation.gameOver = true\n            }\n          }\n        }\n\n        if (mutation.shouldShiftItems) { // 4\n          cube.x = diamondCoords[i].x\n          cube.y = 0\n          cube.z = currentLevelMinusDiamondStart + diamondCoords[i].z\n        }\n\n      }\n\n      material.current.color = mutation.globalColor\n\n      dummy.position.set(\n        cube.x,\n        cube.y,\n        cube.z\n      )\n\n      // apply changes to dummy and to the instanced matrix\n      dummy.updateMatrix()\n      mesh.current.setMatrixAt(i, dummy.matrix)\n    })\n\n    // Tells THREE to draw the updated matrix, I guess?\n    mesh.current.instanceMatrix.needsUpdate = true\n  })\n\n  return (\n    <instancedMesh ref={mesh} args={[null, null, diamondCoords.length]}>\n      <boxBufferGeometry args={[20, 40, 20]} />\n      <meshBasicMaterial ref={material} color={COLORS[0].three} />\n    </instancedMesh>\n  )\n}","import { useFrame } from '@react-three/fiber'\nimport { useRef } from 'react'\n\nimport { useStore, mutation } from '../state/useStore'\nimport { PLANE_SIZE, COLORS, LEVEL_SIZE } from '../constants'\n\nexport default function Arch() {\n  const ship = useStore((s) => s.ship)\n  const level = useStore(s => s.level)\n\n  const arches = useRef()\n\n  const arch1 = useRef()\n  const arch2 = useRef()\n  const arch3 = useRef()\n  const arch4 = useRef()\n  const arch5 = useRef()\n  const arch6 = useRef()\n\n  // latter arches\n  const arch7 = useRef()\n  const arch8 = useRef()\n  const arch9 = useRef()\n  const arch10 = useRef()\n\n  const levelColor = (base) => {\n    return (base + level) % LEVEL_SIZE\n  }\n\n  useFrame((state, delta) => {\n    if (ship.current) {\n      if (mutation.shouldShiftItems) {\n        arches.current.position.z = mutation.currentLevelLength - PLANE_SIZE * (LEVEL_SIZE - 2) - 300\n        arch7.current.visible = true\n        arch8.current.visible = true\n        arch9.current.visible = true\n        arch10.current.visible = true\n      }\n    }\n\n\n    // TODO: maybe set arches to globalcolor always\n    if (mutation.colorLevel === 6) {\n      arch1.current.material.color = mutation.globalColor\n      arch2.current.material.color = mutation.globalColor\n      arch3.current.material.color = mutation.globalColor\n      arch4.current.material.color = mutation.globalColor\n      arch5.current.material.color = mutation.globalColor\n      arch6.current.material.color = mutation.globalColor\n      arch7.current.material.color = mutation.globalColor\n      arch8.current.material.color = mutation.globalColor\n      arch9.current.material.color = mutation.globalColor\n      arch10.current.material.color = mutation.globalColor\n    } else {\n      arch1.current.material.color = COLORS[levelColor(0)].three\n      arch2.current.material.color = COLORS[levelColor(1)].three\n      arch3.current.material.color = COLORS[levelColor(2)].three\n      arch4.current.material.color = COLORS[levelColor(3)].three\n      arch5.current.material.color = COLORS[levelColor(4)].three\n      arch6.current.material.color = COLORS[levelColor(5)].three\n\n      arch7.current.material.color = COLORS[levelColor(0)].three\n      arch8.current.material.color = COLORS[levelColor(0)].three\n      arch9.current.material.color = COLORS[levelColor(0)].three\n      arch10.current.material.color = COLORS[levelColor(0)].three\n    }\n\n\n    const scaleFactor = mutation.currentMusicLevel\n\n    if (scaleFactor > 0.8 && arches.current.scale.x > 0.95) {\n      arches.current.scale.x -= scaleFactor * delta * 1\n      arches.current.scale.y -= scaleFactor * delta * 1\n    } else if (arches.current.scale.x < 1) {\n      arches.current.scale.x += scaleFactor * delta * 0.5\n      arches.current.scale.y += scaleFactor * delta * 0.5\n    }\n  })\n\n  return (\n    <group ref={arches}>\n      <mesh ref={arch1} position={[0, 0, -150]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[100, 20, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\n      </mesh>\n      <mesh ref={arch2} position={[0, 0, -200]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[90, 16, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[1].three} />\n      </mesh>\n      <mesh ref={arch3} position={[0, 0, -250]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[80, 12, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[2].three} />\n      </mesh>\n      <mesh ref={arch4} position={[0, 0, -300]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[70, 10, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[3].three} />\n      </mesh>\n      <mesh ref={arch5} position={[0, 0, -350]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[60, 8, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[4].three} />\n      </mesh>\n      <mesh ref={arch6} position={[0, 0, -400]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[50, 6, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[5].three} />\n      </mesh>\n      <mesh visible={false} ref={arch7} position={[0, 0, -1980]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\n      </mesh>\n      <mesh visible={false} ref={arch8} position={[0, 0, -1920]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\n      </mesh>\n      <mesh visible={false} ref={arch9} position={[0, 0, -1880]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\n      </mesh>\n      <mesh visible={false} ref={arch10} position={[0, 0, -1820]} rotation={[0, 0, Math.PI]}>\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\n      </mesh>\n    </group>\n  )\n}","export default __webpack_public_path__ + \"static/media/galaxyTextureBW.3bf07a9f.png\";","import { useFrame, useThree } from '@react-three/fiber'\nimport { useTexture } from '@react-three/drei'\nimport { useRef, useLayoutEffect, useState, Suspense, useMemo } from 'react'\nimport { MirroredRepeatWrapping, Vector2, BackSide } from 'three'\n\nimport { useStore, mutation } from '../state/useStore'\nimport { PLANE_SIZE, COLORS, LEVEL_SIZE } from '../constants'\n\nimport galaxyTexture from '../textures/galaxyTextureBW.png'\n\nfunction HyperspaceTunnel() {\n  const texture = useTexture(galaxyTexture)\n\n  const ship = useStore((s) => s.ship)\n  const level = useStore(s => s.level)\n\n  const { clock } = useThree()\n\n  const tunnel = useRef()\n\n  const tunnel2 = useRef()\n\n  const tunnels = useRef()\n\n  const repeatX = useRef(10)\n  const repeatY = useRef(4)\n\n\n  const [lathe] = useState(() => {\n    const points = [\n      new Vector2(100, 150),\n      new Vector2(90, 200),\n      new Vector2(80, 250),\n      new Vector2(70, 300),\n      new Vector2(60, 350),\n      new Vector2(50, 400),\n\n    ]\n\n    return points\n  })\n\n  const [lathe2] = useState(() => {\n    const points = [\n      new Vector2(50, 400),\n      new Vector2(300, 600), // 6\n      new Vector2(300, 1000), // 7\n      new Vector2(300, 1600), // 8\n      new Vector2(100, 1720), // 9\n      new Vector2(50, 1790),\n      new Vector2(50, 1980)]\n\n    return points\n  })\n\n  useLayoutEffect(() => {\n    texture.wrapS = texture.wrapT = MirroredRepeatWrapping\n    texture.repeat.set(10, 4)\n    texture.anisotropy = 16\n  }, [texture])\n\n  const lowerBound = useMemo(() => -4250 - PLANE_SIZE * (level * LEVEL_SIZE), [level])\n  const upperBound = useMemo(() => -6500 - PLANE_SIZE * (level * LEVEL_SIZE), [level])\n  const prevLowerBound = useMemo(() => -4250 - PLANE_SIZE * ((level - 1) * LEVEL_SIZE), [level])\n  const prevUpperBound = useMemo(() => -6500 - PLANE_SIZE * ((level - 1) * LEVEL_SIZE), [level])\n\n  useFrame((state, delta) => {\n    if (ship.current) {\n      if (mutation.shouldShiftItems) {\n        tunnel.current.position.z = lowerBound - 50\n        tunnel2.current.position.z = lowerBound - 50\n      }\n    }\n\n    if (ship.current) {\n      if ((ship.current.position.z < lowerBound && ship.current.position.z > upperBound) ||\n        (ship.current.position.z < prevLowerBound && ship.current.position.z > prevUpperBound)) {\n        tunnel2.current.visible = true\n      } else {\n        tunnel2.current.visible = false\n      }\n    }\n\n\n    repeatY.current = 0.3 + (Math.sin(clock.getElapsedTime() / 3)) * 1.5\n    repeatX.current = 6 + (Math.sin(clock.getElapsedTime() / 2)) * 4\n\n    tunnel.current.material.map.offset.x += 0.01 * delta * 165\n    tunnel.current.material.map.offset.y += 0.005 * delta * 165\n    tunnel.current.material.map.repeat.set(repeatX.current, repeatY.current)\n    tunnel.current.material.emissive = mutation.globalColor\n    tunnel2.current.material.map.offset.x += 0.01 * delta * 165\n    tunnel2.current.material.map.offset.y += 0.005 * delta * 165\n    tunnel2.current.material.map.repeat.set(repeatX.current, repeatY.current)\n    tunnel2.current.material.emissive = mutation.globalColor\n\n\n    const scaleFactor = mutation.currentMusicLevel\n\n    if (scaleFactor > 0.8 && tunnels.current.scale.x > 0.95) {\n      tunnels.current.scale.x -= scaleFactor * delta * 1\n      tunnels.current.scale.y -= scaleFactor * delta * 1\n    } else if (tunnels.current.scale.x < 1) {\n      tunnels.current.scale.x += scaleFactor * delta * 0.5\n      tunnels.current.scale.y += scaleFactor * delta * 0.5\n    }\n  })\n\n  return (\n    <group ref={tunnels}>\n      <mesh ref={tunnel} position={[0, 0, -4300]} rotation={[0, -Math.PI / 2, Math.PI / 2]}>\n        <latheBufferGeometry args={[lathe, 50]} />\n        <meshStandardMaterial fog={false} attach=\"material\" side={BackSide} emissiveIntensity={0.4} emissive={COLORS[5].three} map={texture} />\n      </mesh>\n      <mesh visible={false} ref={tunnel2} position={[0, 0, -4300]} rotation={[0, -Math.PI / 2, Math.PI / 2]}>\n        <latheBufferGeometry args={[lathe2, 50]} />\n        <meshStandardMaterial fog={false} attach=\"material\" side={BackSide} emissiveIntensity={0.4} emissive={COLORS[5].three} map={texture} />\n      </mesh>\n    </group>\n  )\n}\n\nexport default function SuspendedHyperspaceTunnel() {\n  return (\n    <Suspense fallback={null}>\n      <HyperspaceTunnel />\n    </Suspense>\n  )\n}","import FixedCubes from './FixedCubes'\nimport Arch from './Arch'\nimport Hyperspace from './Hyperspace'\n\nexport default function CubeTunnel() {\n\n\n  return (\n    <>\n      <FixedCubes />\n      <Arch />\n      <Hyperspace />\n    </>\n  )\n}","import { useRef, useEffect } from 'react'\nimport { extend, useThree, useFrame } from '@react-three/fiber'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\nimport { SSAOPass } from 'three/examples/jsm/postprocessing/SSAOPass'\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass'\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader'\n\nimport { useStore, mutation } from '../state/useStore'\n\nextend({ EffectComposer, ShaderPass, RenderPass, UnrealBloomPass, SSAOPass, AfterimagePass })\n\n\n\n\nexport default function Effects() {\n  const composer = useRef()\n  const { scene, gl, size, camera } = useThree()\n\n  const bloomFactor = useRef(0)\n\n  const musicEnabled = useStore(s => s.musicEnabled)\n\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size])\n  useFrame((state, delta) => {\n    if (musicEnabled) {\n      const bloom = composer.current.passes[1]\n\n      // const bloomFactor = mutation.currentMusicLevel\n      // console.log(bloomFactor)\n\n      if (mutation.currentMusicLevel > bloomFactor.current) {\n        bloomFactor.current = mutation.currentMusicLevel\n      } else {\n        bloomFactor.current -= delta * 0.5\n      }\n\n      bloom.strength = bloomFactor.current > 0.8 ? bloomFactor.current : 0.8\n      // bloom.radius = bloomFactor + 0.2 > 1 ? bloomFactor + 0.2 : 1\n    }\n    composer.current.render()\n  }, 1)\n\n\n  return (\n    <effectComposer ref={composer} args={[gl]}>\n      <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n      <unrealBloomPass attachArray=\"passes\" args={[undefined, 0.8 /* strength: 1 */, 1, 0.4 /* 0.4 */]} />\n      <shaderPass attachArray=\"passes\" args={[FXAAShader]} material-uniforms-resolution-value={[1 / size.width, 1 / size.height]} />\n    </effectComposer>\n  )\n}","import { useEffect } from 'react'\nimport { useStore } from '../state/useStore'\n\nconst pressed = []\n\nfunction useKeys(target, event, up = true) {\n  useEffect(() => {\n    const downHandler = (e) => {\n      if (target.indexOf(e.key) !== -1) {\n        const isRepeating = !!pressed[e.keyCode]\n        pressed[e.keyCode] = true\n        if (up || !isRepeating) event(true)\n      }\n    }\n\n    const upHandler = (e) => {\n      if (target.indexOf(e.key) !== -1) {\n        pressed[e.keyCode] = false\n        if (up) event(false)\n      }\n    }\n\n    window.addEventListener('keydown', downHandler, { passive: true })\n    window.addEventListener('keyup', upHandler, { passive: true })\n    return () => {\n      window.removeEventListener('keydown', downHandler)\n      window.removeEventListener('keyup', upHandler)\n    }\n  }, [target, event, up])\n}\n\nexport default function KeyboardControls() {\n  const set = useStore((state) => state.set)\n  useKeys(['ArrowLeft', 'a', 'A'], (left) => set((state) => ({ ...state, controls: { ...state.controls, left } })))\n  useKeys(['ArrowRight', 'd', 'D'], (right) => set((state) => ({ ...state, controls: { ...state.controls, right } })))\n\n  return null\n}","import { useEffect } from 'react'\nimport { useFrame } from '@react-three/fiber'\n\nimport { useStore, mutation } from '../state/useStore'\nimport { INITIAL_GAME_SPEED, PLANE_SIZE, LEVEL_SIZE } from '../constants'\n\n// this is supposedly a performance improvement\nconst shipSelector = s => s.ship\nconst setScoreSelector = s => s.setScore\nconst gameStartedSelector = s => s.gameStarted\nconst setIsSpeedingUpSelector = s => s.setIsSpeedingUp\nconst setGameOverSelector = s => s.setGameOver\n\nexport default function GameState() {\n  const ship = useStore(shipSelector)\n  const setScore = useStore(setScoreSelector)\n  const gameStarted = useStore(gameStartedSelector)\n  const setIsSpeedingUp = useStore(setIsSpeedingUpSelector)\n  const setGameOver = useStore(setGameOverSelector)\n\n  const level = useStore(s => s.level)\n\n  useEffect(() => {\n    mutation.currentLevelLength = -(level * PLANE_SIZE * LEVEL_SIZE)\n  }, [level])\n\n  useEffect(() => {\n    if (gameStarted) {\n      mutation.desiredSpeed = INITIAL_GAME_SPEED\n    }\n  }, [gameStarted])\n\n\n\n  useFrame((state, delta) => {\n\n    // acceleration logic\n    const accelDelta = 1 * delta * 0.15\n    if (gameStarted && !mutation.gameOver) {\n      if (mutation.gameSpeed < mutation.desiredSpeed) {\n        setIsSpeedingUp(true)\n        if (mutation.gameSpeed + accelDelta > mutation.desiredSpeed) {\n          mutation.gameSpeed = mutation.desiredSpeed\n        } else {\n          mutation.gameSpeed += accelDelta\n        }\n      } else {\n        setIsSpeedingUp(false)\n      }\n    }\n\n    if (ship.current) {\n      // sets the score counter in the hud\n      mutation.score = Math.abs(ship.current.position.z) - 10\n\n      // optimization, instead of calculating this for all elements we do it once per frame here\n      mutation.shouldShiftItems = ship.current.position.z < -400 && ship.current.position.z < mutation.currentLevelLength - 400 && ship.current.position.z > mutation.currentLevelLength - 1000\n    }\n\n    if (gameStarted && mutation.gameOver) {\n      setScore(Math.abs(ship.current.position.z) - 10)\n      setGameOver(true)\n    }\n  })\n\n  return null\n}","import { useFrame } from '@react-three/fiber'\nimport { useRef } from 'react'\n\nimport { COLORS } from '../constants'\n\nimport { mutation } from '../state/useStore'\n\n// handles gracefully fading all objects to the correct color depending on level\n// mutates state directly for performance reasons\nexport default function GlobalColor({ materialRef }) {\n  const colorAlpha = useRef(0)\n  const previousLevel = useRef(0)\n\n  const rainbowAlpha1 = useRef(0)\n  const rainbowAlpha2 = useRef(0)\n  const rainbowAlpha3 = useRef(0)\n  const rainbowAlpha4 = useRef(0)\n  const rainbowAlpha5 = useRef(0)\n\n  useFrame((state, delta) => {\n    // Make sure the first level is red\n    if (mutation.colorLevel === 0) {\n      mutation.globalColor.set(COLORS[0].three)\n    }\n\n    // Rainbow Level\n    if (mutation.colorLevel === 6) {\n      const rainbowSpeed = delta * 3\n\n      if (rainbowAlpha1.current < 1) {\n        rainbowAlpha1.current += rainbowSpeed\n        mutation.globalColor.lerpColors(COLORS[0].three, COLORS[2].three, rainbowAlpha1.current)\n      } else if (rainbowAlpha2.current < 1) {\n        rainbowAlpha2.current += rainbowSpeed\n        mutation.globalColor.lerpColors(COLORS[2].three, COLORS[3].three, rainbowAlpha2.current)\n      } else if (rainbowAlpha3.current < 1) {\n        rainbowAlpha3.current += rainbowSpeed\n        mutation.globalColor.lerpColors(COLORS[3].three, COLORS[1].three, rainbowAlpha3.current)\n      } else if (rainbowAlpha4.current < 1) {\n        rainbowAlpha4.current += rainbowSpeed\n        mutation.globalColor.lerpColors(COLORS[1].three, COLORS[5].three, rainbowAlpha4.current)\n      } else if (rainbowAlpha5.current < 1) {\n        rainbowAlpha5.current += rainbowSpeed\n        mutation.globalColor.lerpColors(COLORS[5].three, COLORS[0].three, rainbowAlpha5.current)\n      } else {\n        rainbowAlpha1.current = 0\n        rainbowAlpha2.current = 0\n        rainbowAlpha3.current = 0\n        rainbowAlpha4.current = 0\n        rainbowAlpha5.current = 0\n      }\n\n      previousLevel.current = 0\n\n      // regular levels\n    } else if (mutation.colorLevel > previousLevel.current) {\n      mutation.globalColor.lerpColors(COLORS[previousLevel.current].three, COLORS[mutation.colorLevel].three, colorAlpha.current)\n\n      if (colorAlpha.current + (delta * mutation.gameSpeed) * 0.5 > 1) {\n        colorAlpha.current = 1\n      } else {\n        colorAlpha.current += (delta * mutation.gameSpeed) * 0.5\n      }\n\n      if (colorAlpha.current === 1) {\n        previousLevel.current = mutation.colorLevel\n        colorAlpha.current = 0\n      }\n    }\n  })\n\n  return null\n}","export default __webpack_public_path__ + \"static/media/intro-loop.85c70e50.mp3\";","export default __webpack_public_path__ + \"static/media/main-nodrums.b36a5309.mp3\";","export default __webpack_public_path__ + \"static/media/main-onlydrums.f5b7b0b0.mp3\";","import { AudioListener, AudioLoader, AudioAnalyser } from 'three'\nimport { useRef, useEffect, useState, Suspense } from 'react'\nimport { useLoader, useFrame } from '@react-three/fiber'\nimport { MathUtils } from 'three'\n\n\nimport { mutation, useStore } from '../state/useStore'\n\nimport introSong from '../audio/intro-loop.mp3'\n\nimport mainSong from '../audio/main-nodrums.mp3'\nimport mainSongDrums from '../audio/main-onlydrums.mp3'\n\nfunction Music() {\n  const introPlayer = useRef()\n  const themePlayer = useRef()\n  const drumPlayer = useRef()\n\n  const soundOrigin = useRef()\n\n  const musicEnabled = useStore(s => s.musicEnabled)\n  const gameStarted = useStore(s => s.gameStarted)\n  const gameOver = useStore(s => s.gameOver)\n  const camera = useStore(s => s.camera)\n  const level = useStore(s => s.level)\n  const hasInteracted = useStore(s => s.hasInteracted)\n\n  const [listener] = useState(() => new AudioListener())\n\n  const introTheme = useLoader(AudioLoader, introSong)\n  const mainTheme = useLoader(AudioLoader, mainSong)\n  const mainThemeDrums = useLoader(AudioLoader, mainSongDrums)\n\n  const themeFilter = useRef()\n  const audioAnalyzer = useRef()\n\n  const introVolume = useRef(1)\n  const themeVolume = useRef(0)\n  const drumVolume = useRef(0)\n\n  const introPlaying = useRef(true)\n  const startCrossfade = useRef(false)\n\n  useEffect(() => {\n    if (hasInteracted && musicEnabled) {\n      introPlayer.current.context.resume()\n    }\n  }, [hasInteracted, musicEnabled])\n\n  useEffect(() => {\n    introPlayer.current.setBuffer(introTheme)\n  }, [introTheme])\n\n  // creates a lowpass filter with the browser audio API, also an audio analyzer\n  useEffect(() => {\n    themePlayer.current.setBuffer(mainTheme)\n    themeFilter.current = themePlayer.current.context.createBiquadFilter()\n    themeFilter.current.type = \"lowpass\"\n    themeFilter.current.frequency.value = 0\n    themePlayer.current.setFilter(themeFilter.current)\n\n  }, [mainTheme])\n\n  useEffect(() => {\n    drumPlayer.current.setBuffer(mainThemeDrums)\n\n    audioAnalyzer.current = new AudioAnalyser(drumPlayer.current, 32)\n  }, [mainThemeDrums])\n\n  useEffect(() => {\n    if (!musicEnabled) {\n      if (introPlayer.current?.isPlaying) {\n        introPlayer.current.stop()\n      }\n\n      if (themePlayer.current?.isPlaying) {\n        themePlayer.current.stop()\n        drumPlayer.current.stop()\n      }\n\n    }\n  }, [musicEnabled])\n\n  useEffect(() => {\n    if (musicEnabled && !gameOver) {\n      if (!introPlayer.current.isPlaying) {\n        introPlayer.current.play()\n        introPlaying.current = true\n      }\n    } else {\n      if (introPlayer.current?.isPlaying) {\n        introPlayer.current.stop()\n      }\n    }\n\n    introPlayer.current.setLoop(true)\n    themePlayer.current.setLoop(true)\n    drumPlayer.current.setLoop(true)\n\n    if (camera.current) {\n      const cam = camera.current\n      cam.add(listener)\n      return () => cam.remove(listener)\n    }\n\n  }, [musicEnabled, introTheme, mainTheme, mainThemeDrums, gameStarted, gameOver, camera, listener])\n\n  useEffect(() => {\n    if (level > 0 && level % 2 === 0) {\n      themePlayer.current.setPlaybackRate(1 + level * 0.02)\n      drumPlayer.current.setPlaybackRate(1 + level * 0.02)\n    } else if (level === 0) {\n      themePlayer.current.setPlaybackRate(1)\n      drumPlayer.current.setPlaybackRate(1)\n    }\n  }, [level])\n\n  useFrame((state, delta) => {\n    if (musicEnabled) {\n\n      if (audioAnalyzer.current) {\n        const audioLevel = MathUtils.inverseLerp(0, 255, audioAnalyzer.current.getFrequencyData()[0])\n        mutation.currentMusicLevel = audioLevel\n      }\n\n      // start playing main theme \"on the beat\" when game starts\n      if (gameStarted && !themePlayer.current.isPlaying) {\n        if (introPlayer.current.context.currentTime.toFixed(1) % 9.6 === 0) {\n          startCrossfade.current = true\n          themePlayer.current.play()\n          drumPlayer.current.play()\n          themePlayer.current.setVolume(0)\n          drumPlayer.current.setVolume(0)\n        }\n      }\n\n      // crossfade intro music to main theme when game starts\n      if (gameStarted && !gameOver && themeVolume.current < 1) {\n        if (!themePlayer.current.isPlaying) {\n          themePlayer.current.play()\n          drumPlayer.current.play()\n        }\n\n        themeFilter.current.frequency.value += delta * 4000\n\n        if (themeVolume.current + delta * 0.2 > 1) {\n          themeVolume.current = 1\n          drumVolume.current = 1\n        } else {\n          themeVolume.current += delta * 0.2\n          drumVolume.current += delta * 0.2\n        }\n\n        if (introVolume.current - delta * 0.2 < 0) {\n          introVolume.current = 0\n        } else {\n          introVolume.current -= delta * 0.2\n        }\n\n        introPlayer.current.setVolume(introVolume.current)\n        themePlayer.current.setVolume(themeVolume.current)\n        drumPlayer.current.setVolume(drumVolume.current)\n      }\n\n\n      // Crossfade main theme back to intro on game over\n      if (gameOver && introVolume.current < 1) {\n        if (!introPlayer.current.isPlaying) {\n          introPlayer.current.play()\n        }\n\n        themeFilter.current.frequency.value -= delta * 4000\n\n        if (themeVolume.current - delta * 0.2 < 0) {\n          themeVolume.current = 0\n          drumVolume.current = 0\n        } else {\n          themeVolume.current -= delta * 0.2\n          drumVolume.current -= delta * 0.2\n        }\n\n        if (introVolume.current + delta * 0.2 > 1) {\n          introVolume.current = 1\n        } else {\n          introVolume.current += delta * 0.2\n        }\n\n        introPlayer.current.setVolume(introVolume.current)\n        themePlayer.current.setVolume(themeVolume.current)\n        drumPlayer.current.setVolume(drumVolume.current)\n      }\n    }\n  })\n\n  return (\n    <group ref={soundOrigin}>\n      <audio ref={introPlayer} args={[listener]} />\n      <audio ref={themePlayer} args={[listener]} />\n      <audio ref={drumPlayer} args={[listener]} />\n    </group>\n  )\n}\n\nexport default function SuspenseMusic() {\n\n  return (\n    <Suspense fallback={null}>\n      <Music />\n    </Suspense>\n  )\n}","export default __webpack_public_path__ + \"static/media/speedup.d71ead93.mp3\";","import { AudioListener, AudioLoader } from 'three'\nimport { useRef, useEffect, useState, Suspense } from 'react'\nimport { useLoader } from '@react-three/fiber'\n\nimport { useStore } from '../state/useStore'\n\nimport speedUp from '../audio/speedup.mp3'\n\nfunction Sound() {\n  const sound = useRef()\n  const soundOrigin = useRef()\n\n\n  const camera = useStore(s => s.camera)\n  const musicEnabled = useStore(s => s.musicEnabled)\n  const level = useStore(s => s.level)\n  const gameStarted = useStore(s => s.gameStarted)\n\n  const [listener] = useState(() => new AudioListener())\n\n  const speedUpSound = useLoader(AudioLoader, speedUp)\n\n\n  useEffect(() => {\n    sound.current.setBuffer(speedUpSound)\n\n    if (musicEnabled) {\n      sound.current.setVolume(0.5)\n    } else {\n      sound.current.setVolume(0)\n    }\n\n    if (camera.current) {\n      const cam = camera.current\n      cam.add(listener)\n      return () => cam.remove(listener)\n    }\n  }, [speedUpSound, musicEnabled, camera, listener])\n\n  useEffect(() => {\n    if (gameStarted && level > 0) {\n      sound.current.setBuffer(speedUpSound)\n      sound.current.play()\n    }\n  }, [gameStarted, level, speedUpSound])\n\n  return (\n    <group ref={soundOrigin}>\n      <audio ref={sound} args={[listener]} />\n    </group>\n  )\n}\n\nexport default function SuspenseSound() {\n\n  return (\n    <Suspense fallback={null}>\n      <Sound />\n    </Suspense>\n  )\n}","import * as React from \"react\";\n\nconst defaultDataInterpolation = (p) => `正在加载中: ${p.toFixed(0)}%`;\n\nexport default function CustomLoader({\n  active,\n  progress,\n  dataInterpolation = defaultDataInterpolation,\n}) {\n  const progressRef = React.useRef(0);\n  const rafRef = React.useRef(0);\n  const progressSpanRef = React.useRef(null);\n\n  const updateProgress = React.useCallback(() => {\n    if (!progressSpanRef.current) return;\n    progressRef.current += (progress - progressRef.current) / 2;\n    if (progressRef.current > 0.95 * progress || progress === 100)\n      progressRef.current = progress;\n    progressSpanRef.current.innerText = dataInterpolation(progressRef.current);\n    if (progressRef.current < progress)\n      rafRef.current = requestAnimationFrame(updateProgress);\n  }, [dataInterpolation, progress]);\n\n  React.useEffect(() => {\n    updateProgress();\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [updateProgress]);\n\n  return (\n    <div style={{ ...styles.container, opacity: active ? 1 : 0 }}>\n      <div>\n        <div style={{ ...styles.inner }}>\n          <div\n            style={{ ...styles.bar, transform: `scaleX(${progress / 100})` }}\n          ></div>\n          <div style={{ marginTop: \"1.5rem\" }}>\n            <span ref={progressSpanRef} style={{ ...styles.data }} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    transition: \"opacity 300ms ease\",\n    zIndex: 1000,\n  },\n  inner: {\n    width: 206,\n    height: 26,\n    textAlign: \"center\",\n    borderRadius: \"5px\",\n    boxShadow: \"0 0 20px 0px #fe2079\",\n    border: \"3px solid #fe2079\",\n  },\n  bar: {\n    height: 20,\n    width: \"100%\",\n    background: \"#fe2079\",\n    transition: \"transform 200ms\",\n    transformOrigin: \"left center\",\n    boxShadow: \"0 0 20px 0px #fe2079\",\n  },\n  data: {\n    textAlign: \"center\",\n    fontVariantNumeric: \"tabular-nums\",\n    marginTop: \"2rem\",\n    color: \"#f0f0f0\",\n    fontSize: \"2em\",\n    fontFamily: `'Commando', mono, monospace, -apple-system, BlinkMacSystemFont, \"Inter\", \"Segoe UI\", \"Helvetica Neue\", Helvetica, Arial, Roboto, Ubuntu, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`,\n    whiteSpace: \"nowrap\",\n    textShadow: \"0 0 20px #fe2079\",\n  },\n};\n","import \"../../styles/author.css\";\n\nexport default function Author() {\n  return (\n    <div className=\"author\">\n      <a\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        href=\"https://github.com/akarlsten\"\n      >{`亚当大佬的github`}</a>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/cuberun-logo.2a67aff7.png\";","import { useProgress } from \"@react-three/drei\";\nimport { useState, useEffect } from \"react\";\n\nimport Loader from \"./CustomLoader\";\nimport Author from \"./Author\";\nimport cubeRunLogo from \"../../textures/cuberun-logo.png\";\nimport \"../../styles/gameMenu.css\";\n\nimport { useStore } from \"../../state/useStore\";\n\nconst Overlay = () => {\n  const [shown, setShown] = useState(true);\n  const [opaque, setOpaque] = useState(true);\n  const [hasLoaded, setHasLoaded] = useState(false);\n  const { active, progress } = useProgress();\n\n  const gameStarted = useStore((s) => s.gameStarted);\n  const gameOver = useStore((s) => s.gameOver);\n  const setGameStarted = useStore((s) => s.setGameStarted);\n  const musicEnabled = useStore((s) => s.musicEnabled);\n  const enableMusic = useStore((s) => s.enableMusic);\n  const setHasInteracted = useStore((s) => s.setHasInteracted);\n\n  useEffect(() => {\n    if (gameStarted || gameOver) {\n      setShown(false);\n    } else if (!gameStarted) {\n      setShown(true);\n    }\n  }, [gameStarted, active, gameOver]);\n\n  useEffect(() => {\n    let t;\n    if (hasLoaded === opaque) t = setTimeout(() => setOpaque(!hasLoaded), 300);\n    return () => clearTimeout(t);\n  }, [hasLoaded, opaque]);\n\n  useEffect(() => {\n    localStorage.setItem(\"musicEnabled\", JSON.stringify(musicEnabled));\n  }, [musicEnabled]);\n\n  useEffect(() => {\n    if (progress >= 100) {\n      setHasLoaded(true);\n    }\n  }, [progress]);\n\n  const handleStart = () => {\n    setGameStarted(true);\n  };\n\n  const handleMusic = () => {\n    enableMusic(!musicEnabled);\n  };\n\n  return shown ? (\n    <div\n      onClick={() => setHasInteracted()}\n      className={`game__container`}\n      style={{\n        opacity: shown ? 1 : 0,\n        background: opaque ? \"#141622FF\" : \"#141622CC\",\n      }}\n    >\n      <div className=\"game__menu\">\n        <img className=\"game__logo\" src={cubeRunLogo} alt=\"Cuberun Logo\" />\n        <div className=\"game__subcontainer\">\n          {!hasLoaded ? (\n            <Loader active={active} progress={progress} />\n          ) : (\n            <>\n              <button onClick={handleStart} className=\"game__menu-button\">\n                {\"->来飞一把<-\"}\n              </button>\n              <div className=\"game__menu-options\">\n                <button\n                  onClick={handleMusic}\n                  className=\"game__menu-button game__menu-button-music\"\n                >{`->音乐 ${musicEnabled ? \"关\" : \"开\"}<-`}</button>\n                <span className=\"game__menu-controls\">\n                  <p>控制键</p>\n                  <p>电脑端: 左方向：A键或者左箭头;右方向：D键或者右箭头</p>\n                  <p>移动端: 游戏开始后，屏幕下方有左右的箭头</p>\n                </span>\n                <span className=\"game__menu-warning\">\n                  光敏感警告: 游戏包含闪烁的灯光\n                </span>\n                <Author />\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  ) : null;\n};\n\nexport default Overlay;\n","import { useEffect, useState, useRef } from \"react\";\nimport { isMobile } from \"react-device-detect\";\nimport { addEffect } from \"@react-three/fiber\";\n\nimport { useStore, mutation } from \"../../state/useStore\";\n\nimport \"../../styles/hud.css\";\n\nconst getSpeed = () => `${(mutation.gameSpeed * 400).toFixed(0)}`;\nconst getScore = () => `${mutation.score.toFixed(0)}`;\n\nexport default function Hud() {\n  const set = useStore((state) => state.set);\n  const level = useStore((s) => s.level);\n\n  const gameOver = useStore((s) => s.gameOver);\n  const gameStarted = useStore((s) => s.gameStarted);\n  const isSpeedingUp = useStore((s) => s.isSpeedingUp);\n\n  const [shown, setShown] = useState(false);\n\n  const [showControls, setShowControls] = useState(false);\n  const [left, setLeftPressed] = useState(false);\n  const [right, setRightPressed] = useState(false);\n\n  // performance optimization for the rapidly updating speedometer and score - see https://github.com/pmndrs/racing-game/blob/main/src/ui/Speed/Text.tsx\n  let then = Date.now();\n\n  const speedRef = useRef();\n  const scoreRef = useRef();\n\n  let currentSpeed = getSpeed();\n  let currentScore = getScore();\n\n  useEffect(() =>\n    addEffect(() => {\n      const now = Date.now();\n\n      if (now - then > 33.3333) {\n        // throttle these to a max of 30 updates/sec\n        if (speedRef.current) {\n          speedRef.current.innerText = getSpeed();\n        }\n\n        if (scoreRef.current) {\n          scoreRef.current.innerText = getScore();\n        }\n\n        // eslint-disable-next-line\n        then = now;\n      }\n    })\n  );\n\n  useEffect(() => {\n    if (showControls) {\n      window.oncontextmenu = function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n      };\n    }\n  }, [showControls]);\n\n  useEffect(() => {\n    if (gameStarted && !gameOver) {\n      setShown(true);\n    } else {\n      setShown(false);\n    }\n  }, [gameStarted, gameOver]);\n\n  useEffect(() => {\n    if (isMobile) {\n      setShowControls(true);\n    } else {\n      setShowControls(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    set((state) => ({ ...state, controls: { ...state.controls, left } }));\n  }, [set, left]);\n\n  useEffect(() => {\n    set((state) => ({ ...state, controls: { ...state.controls, right } }));\n  }, [set, right]);\n\n  return shown ? (\n    <div className=\"hud\">\n      {level > 0 && isSpeedingUp && (\n        <div className=\"center\">\n          <h3 className=\"center__speedup\">SPEED UP</h3>\n        </div>\n      )}\n      {showControls && (\n        <div className=\"controls\">\n          <button\n            onTouchStart={() => setLeftPressed(true)}\n            onTouchEnd={() => setLeftPressed(false)}\n            className={`control control__left ${left ? \"control-active\" : \"\"}`}\n          >\n            {\"<\"}\n          </button>\n          <button\n            onTouchStart={() => setRightPressed(true)}\n            onTouchEnd={() => setRightPressed(false)}\n            className={`control control__right ${\n              right ? \"control-active\" : \"\"\n            }`}\n          >\n            {\">\"}\n          </button>\n        </div>\n      )}\n      <div className=\"bottomLeft\">\n        <div className={`score ${showControls ? \"score__withcontrols\" : \"\"}`}>\n          <h3 className=\"score__title\">级别</h3>\n          <h1 className=\"score__number\">{level + 1}</h1>\n          <h3 className=\"score__title\">千米/小时</h3>\n          <h1 ref={speedRef} className=\"score__number\">\n            {currentSpeed}\n          </h1>\n          <h3 className=\"score__title\">成绩</h3>\n          <h1 ref={scoreRef} className=\"score__number\">\n            {currentScore}\n          </h1>\n        </div>\n      </div>\n    </div>\n  ) : null;\n}\n","import { useState, useEffect } from \"react\";\n\nimport cubeRunLogo from \"../../textures/cuberun-logo.png\";\n\nimport \"../../styles/gameMenu.css\";\n\nimport { useStore } from \"../../state/useStore\";\n\nconst GameOverScreen = () => {\n  const previousScores = localStorage.getItem(\"highscores\")\n    ? JSON.parse(localStorage.getItem(\"highscores\"))\n    : [...Array(3).fill(0)];\n  const [shown, setShown] = useState(false);\n  const [opaque, setOpaque] = useState(false);\n  const [highScores, setHighscores] = useState(previousScores);\n\n  const gameOver = useStore((s) => s.gameOver);\n  const score = useStore((s) => s.score);\n\n  useEffect(() => {\n    let t;\n    if (gameOver !== opaque) t = setTimeout(() => setOpaque(gameOver), 500);\n    return () => clearTimeout(t);\n  }, [gameOver, opaque]);\n\n  useEffect(() => {\n    if (gameOver) {\n      setShown(true);\n    } else {\n      setShown(false);\n    }\n  }, [gameOver]);\n\n  useEffect(() => {\n    if (gameOver) {\n      if (highScores.some((previousScore) => score > previousScore)) {\n        const sortedScores = highScores.sort((a, b) => a - b);\n        sortedScores[0] = score.toFixed(0);\n        const resortedScores = sortedScores.sort((a, b) => b - a);\n\n        setHighscores(resortedScores);\n        localStorage.setItem(\"highscores\", JSON.stringify(resortedScores));\n      }\n    }\n  }, [gameOver, highScores, score]);\n\n  const handleRestart = () => {\n    window.location.reload(); // TODO: make a proper restart\n  };\n\n  return shown ? (\n    <div\n      className=\"game__container\"\n      style={{\n        opacity: shown ? 1 : 0,\n        background: opaque ? \"#141622FF\" : \"#141622CC\",\n      }}\n    >\n      <div className=\"game__menu\">\n        <img\n          className=\"game__logo-small\"\n          width=\"512px\"\n          src={cubeRunLogo}\n          alt=\"Cuberun Logo\"\n        />\n        <h1 className=\"game__score-gameover\">干的漂亮</h1>\n        <div className=\"game__scorecontainer\">\n          <div className=\"game__score-left\">\n            <h1 className=\"game__score-title\">飞行员得分</h1>\n            <h1 className=\"game__score\">{score.toFixed(0)}</h1>\n          </div>\n          <div className=\"game__score-right\">\n            <h1 className=\"game__score-title\">至尊榜</h1>\n            {highScores.map((newScore, i) => (\n              <div key={`${i}-${score}`} className=\"game__score-highscore\">\n                <span className=\"game__score-number\">{i + 1}</span>\n                <span\n                  style={{\n                    textDecoration:\n                      score.toFixed(0) === newScore ? \"underline\" : \"none\",\n                  }}\n                  className=\"game__score-score\"\n                >\n                  {newScore > 0 ? newScore : \"-\"}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n        <button onClick={handleRestart} className=\"game__menu-button\">\n          {`->英雄再飞一把<-`}\n        </button>\n      </div>\n    </div>\n  ) : null;\n};\n\nexport default GameOverScreen;\n","import { Canvas } from '@react-three/fiber'\nimport { Suspense } from 'react'\nimport { Preload } from '@react-three/drei'\n\nimport { useStore } from '../state/useStore'\n\n// THREE components\nimport Ship from './Ship'\nimport Ground from './Ground'\nimport Skybox from './Skybox'\nimport Cubes from './Cubes'\nimport Walls from './Walls'\nimport CubeTunnel from './CubeTunnel'\nimport Effects from './Effects'\n\n// State/dummy components\nimport KeyboardControls from './KeyboardControls'\nimport GameState from './GameState'\nimport GlobalColor from './GlobalColor'\nimport Music from './Music'\nimport Sound from './Sound'\n\n// HTML components\nimport Overlay from './html/Overlay'\nimport Hud from './html/Hud'\nimport GameOverScreen from './html/GameOverScreen'\n\n\nexport default function CubeWorld({ color, bgColor }) {\n  const directionalLight = useStore((s) => s.directionalLight)\n\n  return (\n    <>\n      <Canvas gl={{ antialias: false, alpha: false }} mode=\"concurrent\" dpr={[1, 1.5]} style={{ background: `${bgColor}` }}>\n        <Suspense fallback={null}>\n          <GameState />\n          <Skybox />\n          <directionalLight\n            ref={directionalLight}\n            intensity={3}\n            position={[0, Math.PI, 0]}\n          />\n          <ambientLight intensity={0.1} />\n          <Ship>\n            {directionalLight.current && <primitive object={directionalLight.current.target} />}\n          </Ship>\n          <Walls />\n          <Cubes />\n          <CubeTunnel />\n          <Ground groundColor={bgColor} />\n          <KeyboardControls />\n          <Effects />\n          <GlobalColor />\n          <Music />\n          <Sound />\n          <Preload all />\n        </Suspense>\n      </Canvas>\n      <Hud />\n      <GameOverScreen />\n      <Overlay />\n    </>\n  )\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './styles/normalize.css'\nimport './styles/index.css';\n\nimport CubeWorld from './components/CubeWorld';\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <CubeWorld bgColor='#141622' />\n//   </React.StrictMode>,\n//   document.getElementById('root')\n// );\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <CubeWorld bgColor='#141622' />\n  </React.StrictMode>\n)"],"sourceRoot":""}